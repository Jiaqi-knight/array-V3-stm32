ARM GAS  /tmp/cc2KHXoi.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 1
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.file	"main.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.section	.text.MX_GPIO_Init,"ax",%progbits
  21              		.align	2
  22              		.thumb
  23              		.thumb_func
  25              	MX_GPIO_Init:
  26              	.LFB139:
  27              		.file 1 "Src/main.c"
   1:Src/main.c    **** /*
   2:Src/main.c    **** * This file is part of the phased-array project.
   3:Src/main.c    **** *
   4:Src/main.c    **** * Copyright (C) 2018 Niklas Fauth <niklas.fauth@kit.fail>
   5:Src/main.c    **** *
   6:Src/main.c    **** * This program is free software: you can redistribute it and/or modify
   7:Src/main.c    **** * it under the terms of the GNU General Public License as published by
   8:Src/main.c    **** * the Free Software Foundation, either version 3 of the License, or
   9:Src/main.c    **** * (at your option) any later version.
  10:Src/main.c    **** *
  11:Src/main.c    **** * This program is distributed in the hope that it will be useful,
  12:Src/main.c    **** * but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:Src/main.c    **** * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:Src/main.c    **** * GNU General Public License for more details.
  15:Src/main.c    **** *
  16:Src/main.c    **** * You should have received a copy of the GNU General Public License
  17:Src/main.c    **** * along with this program.  If not, see <http://www.gnu.org/licenses/>.
  18:Src/main.c    **** */
  19:Src/main.c    **** 
  20:Src/main.c    **** /* Includes ------------------------------------------------------------------*/
  21:Src/main.c    **** #include "main.h"
  22:Src/main.c    **** #include "defines.h"
  23:Src/main.c    **** #include "stm32f3xx_hal.h"
  24:Src/main.c    **** 
  25:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  26:Src/main.c    **** ADC_HandleTypeDef hadc1;
  27:Src/main.c    **** ADC_HandleTypeDef hadc2;
  28:Src/main.c    **** DMA_HandleTypeDef hdma_adc1;
  29:Src/main.c    **** DMA_HandleTypeDef hdma_adc2;
  30:Src/main.c    **** 
  31:Src/main.c    **** COMP_HandleTypeDef hcomp2;
ARM GAS  /tmp/cc2KHXoi.s 			page 2


  32:Src/main.c    **** COMP_HandleTypeDef hcomp4;
  33:Src/main.c    **** COMP_HandleTypeDef hcomp6;
  34:Src/main.c    **** 
  35:Src/main.c    **** DAC_HandleTypeDef hdac1;
  36:Src/main.c    **** DAC_HandleTypeDef hdac2;
  37:Src/main.c    **** 
  38:Src/main.c    **** HRTIM_HandleTypeDef hhrtim1;
  39:Src/main.c    **** 
  40:Src/main.c    **** TIM_HandleTypeDef htim2;
  41:Src/main.c    **** TIM_HandleTypeDef htim3;
  42:Src/main.c    **** 
  43:Src/main.c    **** UART_HandleTypeDef huart1;
  44:Src/main.c    **** UART_HandleTypeDef huart3;
  45:Src/main.c    **** DMA_HandleTypeDef hdma_usart1_rx;
  46:Src/main.c    **** DMA_HandleTypeDef hdma_usart1_tx;
  47:Src/main.c    **** 
  48:Src/main.c    **** 
  49:Src/main.c    **** /* Private variables ---------------------------------------------------------*/
  50:Src/main.c    **** float Vin;
  51:Src/main.c    **** float Vout;
  52:Src/main.c    **** float Temp1;
  53:Src/main.c    **** float Temp2;
  54:Src/main.c    **** float Iout;
  55:Src/main.c    **** 
  56:Src/main.c    **** float duty;
  57:Src/main.c    **** float esum;
  58:Src/main.c    **** 
  59:Src/main.c    **** /* Private function prototypes -----------------------------------------------*/
  60:Src/main.c    **** void SystemClock_Config(void);
  61:Src/main.c    **** static void MX_GPIO_Init(void);
  62:Src/main.c    **** static void MX_DMA_Init(void);
  63:Src/main.c    **** static void MX_ADC1_Init(void);
  64:Src/main.c    **** static void MX_ADC2_Init(void);
  65:Src/main.c    **** static void MX_COMP2_Init(void);
  66:Src/main.c    **** static void MX_COMP4_Init(void);
  67:Src/main.c    **** static void MX_COMP6_Init(void);
  68:Src/main.c    **** static void MX_DAC1_Init(void);
  69:Src/main.c    **** static void MX_HRTIM1_Init(void);
  70:Src/main.c    **** static void MX_TIM2_Init(void);
  71:Src/main.c    **** static void MX_TIM3_Init(void);
  72:Src/main.c    **** static void MX_USART1_UART_Init(void);
  73:Src/main.c    **** static void MX_USART3_UART_Init(void);
  74:Src/main.c    **** static void MX_DAC2_Init(void);
  75:Src/main.c    **** static void HRTIM_Config(void);
  76:Src/main.c    **** static void ADC1_Config(void);
  77:Src/main.c    **** static void ADC2_Config(void);
  78:Src/main.c    **** static float r2temp(float);
  79:Src/main.c    **** 
  80:Src/main.c    **** void HAL_HRTIM_MspPostInit(HRTIM_HandleTypeDef *hhrtim1);
  81:Src/main.c    **** 
  82:Src/main.c    **** 
  83:Src/main.c    **** void HAL_TIM_MspPostInit(TIM_HandleTypeDef *htim);
  84:Src/main.c    **** 
  85:Src/main.c    **** 
  86:Src/main.c    **** void DCDC_Reg() {
  87:Src/main.c    ****   HAL_GPIO_TogglePin(LED_ACT_GPIO_Port, LED_ACT_Pin);
  88:Src/main.c    **** }
ARM GAS  /tmp/cc2KHXoi.s 			page 3


  89:Src/main.c    **** 
  90:Src/main.c    **** int main(void)
  91:Src/main.c    **** {
  92:Src/main.c    **** 
  93:Src/main.c    ****   /* MCU Configuration----------------------------------------------------------*/
  94:Src/main.c    **** 
  95:Src/main.c    ****   /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  96:Src/main.c    ****   HAL_Init();
  97:Src/main.c    **** 
  98:Src/main.c    ****   /* Configure the system clock */
  99:Src/main.c    ****   SystemClock_Config();
 100:Src/main.c    **** 
 101:Src/main.c    ****   /* Initialize all configured peripherals */
 102:Src/main.c    ****   MX_GPIO_Init();
 103:Src/main.c    ****   MX_DMA_Init();
 104:Src/main.c    **** 
 105:Src/main.c    ****   //MX_COMP2_Init();
 106:Src/main.c    ****   //MX_COMP4_Init();
 107:Src/main.c    ****   //MX_COMP6_Init();
 108:Src/main.c    ****   //MX_DAC1_Init();
 109:Src/main.c    ****   //MX_HRTIM1_Init();
 110:Src/main.c    ****   //MX_TIM2_Init();
 111:Src/main.c    ****   //MX_TIM3_Init();
 112:Src/main.c    **** 
 113:Src/main.c    ****   MX_USART1_UART_Init();
 114:Src/main.c    ****   MX_USART3_UART_Init();
 115:Src/main.c    **** 
 116:Src/main.c    ****   ADC1_Config();
 117:Src/main.c    ****   ADC2_Config();
 118:Src/main.c    **** 
 119:Src/main.c    ****   HRTIM_Config();
 120:Src/main.c    ****   //MX_DAC2_Init();
 121:Src/main.c    **** 
 122:Src/main.c    ****   /* Infinite loop */
 123:Src/main.c    **** 
 124:Src/main.c    ****   while (1)
 125:Src/main.c    ****   {
 126:Src/main.c    ****     for (int i = 0; i < 2000; i++) {
 127:Src/main.c    ****       Vin = (HAL_ADCEx_InjectedGetValue(&hadc1, ADC_INJECTED_RANK_2) * ADC_VREF * VOUT_DIV)/ARES;
 128:Src/main.c    ****       Vout = (HAL_ADCEx_InjectedGetValue(&hadc1, ADC_INJECTED_RANK_1) * ADC_VREF * VOUT_DIV)/ARES;
 129:Src/main.c    ****       int16_t USpp = (HAL_ADCEx_InjectedGetValue(&hadc1, ADC_INJECTED_RANK_3) * ADC_VREF)/ARES;
 130:Src/main.c    **** 
 131:Src/main.c    ****       Iout = (HAL_ADCEx_InjectedGetValue(&hadc2, ADC_INJECTED_RANK_1) * ADC_VREF * IOUT_DIV)/ARES;
 132:Src/main.c    **** 
 133:Src/main.c    ****       Temp1 = r2temp(NTC_R((HAL_ADCEx_InjectedGetValue(&hadc2, ADC_INJECTED_RANK_2) * ADC_VREF)/ARE
 134:Src/main.c    ****       Temp2 = r2temp(NTC_R((HAL_ADCEx_InjectedGetValue(&hadc2, ADC_INJECTED_RANK_3) * ADC_VREF)/ARE
 135:Src/main.c    **** 
 136:Src/main.c    ****       float error = VTARGET - Vout;
 137:Src/main.c    ****       esum += error;
 138:Src/main.c    ****       esum = CLAMP(esum, -2000, 2000);
 139:Src/main.c    **** 
 140:Src/main.c    **** 
 141:Src/main.c    ****       duty = 1.0f - (Vin / (VTARGET + DC_RES * Iout + (esum * 0.01f)));
 142:Src/main.c    ****       duty = MIN(duty, 0.76f); // limit dutycicle (max 50V at 12V in)
 143:Src/main.c    **** 
 144:Src/main.c    ****       uint16_t TIMERSET = BUCK_PWM_PERIOD - (BUCK_PWM_PERIOD * duty);
 145:Src/main.c    **** 
ARM GAS  /tmp/cc2KHXoi.s 			page 4


 146:Src/main.c    ****       HRTIM1->sTimerxRegs[HRTIM_TIMERINDEX_TIMER_A].CMP1xR = TIMERSET; //set new compare value
 147:Src/main.c    ****       //HAL_Delay(1);
 148:Src/main.c    ****     }
 149:Src/main.c    **** 
 150:Src/main.c    ****     HAL_GPIO_TogglePin(LED_READY_GPIO_Port, LED_READY_Pin);
 151:Src/main.c    **** 
 152:Src/main.c    **** 
 153:Src/main.c    ****     printf("%c[2J", 27); // clear terminal
 154:Src/main.c    ****     printf("%c[H", 27);  // home cursor
 155:Src/main.c    **** 
 156:Src/main.c    ****     printf("NTC1: %.2f°C  NTC2: %.2f°C\n\r", Temp1, Temp2);
 157:Src/main.c    ****     printf("Vin:  %.3fV  Vout: %.3fV\n\r", Vin, Vout);
 158:Src/main.c    ****     printf("Iout: %.2fA    Pout: %.2fW  e: %.2f\n\r", Iout, Iout*Vout, esum);
 159:Src/main.c    ****   }
 160:Src/main.c    **** }
 161:Src/main.c    **** 
 162:Src/main.c    **** /** System Clock Configuration
 163:Src/main.c    **** */
 164:Src/main.c    **** void SystemClock_Config(void)
 165:Src/main.c    **** {
 166:Src/main.c    **** 
 167:Src/main.c    ****   RCC_OscInitTypeDef RCC_OscInitStruct;
 168:Src/main.c    ****   RCC_ClkInitTypeDef RCC_ClkInitStruct;
 169:Src/main.c    ****   RCC_PeriphCLKInitTypeDef PeriphClkInit;
 170:Src/main.c    **** 
 171:Src/main.c    ****     /**Initializes the CPU, AHB and APB busses clocks
 172:Src/main.c    ****     */
 173:Src/main.c    ****   RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
 174:Src/main.c    ****   RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 175:Src/main.c    ****   RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;
 176:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 177:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 178:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 179:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;
 180:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 181:Src/main.c    ****   {
 182:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 183:Src/main.c    ****   }
 184:Src/main.c    **** 
 185:Src/main.c    ****     /**Initializes the CPU, AHB and APB busses clocks
 186:Src/main.c    ****     */
 187:Src/main.c    ****   RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
 188:Src/main.c    ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 189:Src/main.c    ****   RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 190:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 191:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
 192:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 193:Src/main.c    **** 
 194:Src/main.c    ****   if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)
 195:Src/main.c    ****   {
 196:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 197:Src/main.c    ****   }
 198:Src/main.c    **** 
 199:Src/main.c    ****   PeriphClkInit.PeriphClockSelection = RCC_PERIPHCLK_HRTIM1|RCC_PERIPHCLK_USART1
 200:Src/main.c    ****                               |RCC_PERIPHCLK_ADC12;
 201:Src/main.c    ****   PeriphClkInit.Usart1ClockSelection = RCC_USART1CLKSOURCE_PCLK1;
 202:Src/main.c    ****   PeriphClkInit.Adc12ClockSelection = RCC_ADC12PLLCLK_DIV1;
ARM GAS  /tmp/cc2KHXoi.s 			page 5


 203:Src/main.c    ****   PeriphClkInit.Hrtim1ClockSelection = RCC_HRTIM1CLK_HCLK;
 204:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK)
 205:Src/main.c    ****   {
 206:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 207:Src/main.c    ****   }
 208:Src/main.c    **** 
 209:Src/main.c    ****     /**Configure the Systick interrupt time
 210:Src/main.c    ****     */
 211:Src/main.c    ****   HAL_SYSTICK_Config(HAL_RCC_GetHCLKFreq()/1000);
 212:Src/main.c    **** 
 213:Src/main.c    ****     /**Configure the Systick
 214:Src/main.c    ****     */
 215:Src/main.c    ****   HAL_SYSTICK_CLKSourceConfig(SYSTICK_CLKSOURCE_HCLK);
 216:Src/main.c    **** 
 217:Src/main.c    ****   /* SysTick_IRQn interrupt configuration */
 218:Src/main.c    ****   HAL_NVIC_SetPriority(SysTick_IRQn, 0, 0);
 219:Src/main.c    **** }
 220:Src/main.c    **** 
 221:Src/main.c    **** /**
 222:Src/main.c    ****   * @brief  Configure ADC1 for being used with HRTIM
 223:Src/main.c    ****   * @param  None
 224:Src/main.c    ****   * @retval None
 225:Src/main.c    ****   */
 226:Src/main.c    **** static void ADC1_Config(void)
 227:Src/main.c    **** {
 228:Src/main.c    ****   ADC_MultiModeTypeDef MultiModeConfig;
 229:Src/main.c    ****   ADC_InjectionConfTypeDef InjectionConfig;
 230:Src/main.c    **** 
 231:Src/main.c    ****   hadc1.Instance = ADC1;
 232:Src/main.c    **** 
 233:Src/main.c    ****   /* ADC1 is working independently */
 234:Src/main.c    ****   MultiModeConfig.DMAAccessMode = ADC_DMAACCESSMODE_DISABLED;
 235:Src/main.c    ****   MultiModeConfig.Mode = ADC_MODE_INDEPENDENT;
 236:Src/main.c    ****   MultiModeConfig.TwoSamplingDelay = ADC_TWOSAMPLINGDELAY_1CYCLE;
 237:Src/main.c    ****   HAL_ADCEx_MultiModeConfigChannel(&hadc1, &MultiModeConfig);
 238:Src/main.c    **** 
 239:Src/main.c    ****   /* ADC1 global initialization */
 240:Src/main.c    ****   /* 12-bit right-aligned format, discontinuous scan mode, running from PLL */
 241:Src/main.c    ****   hadc1.Init.ClockPrescaler = ADC_CLOCK_ASYNC_DIV1;
 242:Src/main.c    ****   hadc1.Init.Resolution = ADC_RESOLUTION_12B;
 243:Src/main.c    ****   hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
 244:Src/main.c    ****   hadc1.Init.ScanConvMode = ENABLE;
 245:Src/main.c    ****   hadc1.Init.EOCSelection = ADC_EOC_SINGLE_CONV;
 246:Src/main.c    ****   hadc1.Init.LowPowerAutoWait = DISABLE;
 247:Src/main.c    ****   hadc1.Init.ContinuousConvMode = DISABLE;
 248:Src/main.c    ****   hadc1.Init.NbrOfConversion = 1;
 249:Src/main.c    ****   hadc1.Init.DiscontinuousConvMode = DISABLE;
 250:Src/main.c    ****   hadc1.Init.NbrOfDiscConversion = 1;
 251:Src/main.c    ****   hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
 252:Src/main.c    ****   hadc1.Init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_NONE;
 253:Src/main.c    ****   hadc1.Init.DMAContinuousRequests = DISABLE;
 254:Src/main.c    ****   hadc1.Init.Overrun = ADC_OVR_DATA_OVERWRITTEN;
 255:Src/main.c    ****   HAL_ADC_Init(&hadc1);
 256:Src/main.c    **** 
 257:Src/main.c    ****   /* Discontinuous injected mode: 1st injected conversion for Vout on Ch11 */
 258:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_11;
 259:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_1;
ARM GAS  /tmp/cc2KHXoi.s 			page 6


 260:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 261:Src/main.c    ****   InjectionConfig.InjectedSingleDiff = ADC_SINGLE_ENDED;
 262:Src/main.c    ****   InjectionConfig.InjectedOffsetNumber = ADC_OFFSET_NONE;
 263:Src/main.c    ****   InjectionConfig.InjectedOffset = 0;
 264:Src/main.c    ****   InjectionConfig.InjectedNbrOfConversion = 3;
 265:Src/main.c    ****   InjectionConfig.InjectedDiscontinuousConvMode = DISABLE;
 266:Src/main.c    ****   InjectionConfig.AutoInjectedConv = DISABLE;
 267:Src/main.c    ****   InjectionConfig.QueueInjectedContext = DISABLE;
 268:Src/main.c    ****   InjectionConfig.ExternalTrigInjecConv = ADC_EXTERNALTRIGINJECCONV_HRTIM_TRG2;
 269:Src/main.c    ****   InjectionConfig.ExternalTrigInjecConvEdge = ADC_EXTERNALTRIGINJECCONV_EDGE_RISING;
 270:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc1, &InjectionConfig);
 271:Src/main.c    **** 
 272:Src/main.c    ****   /* Configure the 2nd injected conversion for Vin on Ch12 */
 273:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_12;
 274:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_2;
 275:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 276:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc1, &InjectionConfig);
 277:Src/main.c    **** 
 278:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_13;
 279:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_3;
 280:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 281:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc1, &InjectionConfig);
 282:Src/main.c    **** 
 283:Src/main.c    ****   /* Run the ADC calibration in single-ended mode */
 284:Src/main.c    ****   HAL_ADCEx_Calibration_Start(&hadc1, ADC_SINGLE_ENDED);
 285:Src/main.c    **** 
 286:Src/main.c    ****   /* Start ADC2 Injected Conversions */
 287:Src/main.c    ****   HAL_ADCEx_InjectedStart(&hadc1);
 288:Src/main.c    **** 
 289:Src/main.c    **** }
 290:Src/main.c    **** 
 291:Src/main.c    **** static void ADC2_Config(void)
 292:Src/main.c    **** {
 293:Src/main.c    ****   ADC_MultiModeTypeDef MultiModeConfig;
 294:Src/main.c    ****   ADC_InjectionConfTypeDef InjectionConfig;
 295:Src/main.c    **** 
 296:Src/main.c    ****   hadc2.Instance = ADC2;
 297:Src/main.c    **** 
 298:Src/main.c    ****   /* ADC1 is working independently */
 299:Src/main.c    ****   MultiModeConfig.DMAAccessMode = ADC_DMAACCESSMODE_DISABLED;
 300:Src/main.c    ****   MultiModeConfig.Mode = ADC_MODE_INDEPENDENT;
 301:Src/main.c    ****   MultiModeConfig.TwoSamplingDelay = ADC_TWOSAMPLINGDELAY_1CYCLE;
 302:Src/main.c    ****   HAL_ADCEx_MultiModeConfigChannel(&hadc2, &MultiModeConfig);
 303:Src/main.c    **** 
 304:Src/main.c    ****   /* ADC2 global initialization */
 305:Src/main.c    ****   /* 12-bit right-aligned format, discontinuous scan mode, running from PLL */
 306:Src/main.c    ****   hadc2.Init.ClockPrescaler = ADC_CLOCK_ASYNC_DIV1;
 307:Src/main.c    ****   hadc2.Init.Resolution = ADC_RESOLUTION_12B;
 308:Src/main.c    ****   hadc2.Init.DataAlign = ADC_DATAALIGN_RIGHT;
 309:Src/main.c    ****   hadc2.Init.ScanConvMode = ENABLE;
 310:Src/main.c    ****   hadc2.Init.EOCSelection = ADC_EOC_SINGLE_CONV;
 311:Src/main.c    ****   hadc2.Init.LowPowerAutoWait = DISABLE;
 312:Src/main.c    ****   hadc2.Init.ContinuousConvMode = DISABLE;
 313:Src/main.c    ****   hadc2.Init.NbrOfConversion = 1;
 314:Src/main.c    ****   hadc2.Init.DiscontinuousConvMode = DISABLE;
 315:Src/main.c    ****   hadc2.Init.NbrOfDiscConversion = 1;
 316:Src/main.c    ****   hadc2.Init.ExternalTrigConv = ADC_SOFTWARE_START;
ARM GAS  /tmp/cc2KHXoi.s 			page 7


 317:Src/main.c    ****   hadc2.Init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_NONE;
 318:Src/main.c    ****   hadc2.Init.DMAContinuousRequests = DISABLE;
 319:Src/main.c    ****   hadc2.Init.Overrun = ADC_OVR_DATA_OVERWRITTEN;
 320:Src/main.c    ****   HAL_ADC_Init(&hadc2);
 321:Src/main.c    **** 
 322:Src/main.c    ****   /* Discontinuous injected mode: 1st injected conversion for Iout on Ch13 */
 323:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_13;
 324:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_1;
 325:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 326:Src/main.c    ****   InjectionConfig.InjectedSingleDiff = ADC_SINGLE_ENDED;
 327:Src/main.c    ****   InjectionConfig.InjectedOffsetNumber = ADC_OFFSET_NONE;
 328:Src/main.c    ****   InjectionConfig.InjectedOffset = 0;
 329:Src/main.c    ****   InjectionConfig.InjectedNbrOfConversion = 3;
 330:Src/main.c    ****   InjectionConfig.InjectedDiscontinuousConvMode = DISABLE;
 331:Src/main.c    ****   InjectionConfig.AutoInjectedConv = DISABLE;
 332:Src/main.c    ****   InjectionConfig.QueueInjectedContext = DISABLE;
 333:Src/main.c    ****   InjectionConfig.ExternalTrigInjecConv = ADC_EXTERNALTRIGINJECCONV_HRTIM_TRG2;
 334:Src/main.c    ****   InjectionConfig.ExternalTrigInjecConvEdge = ADC_EXTERNALTRIGINJECCONV_EDGE_RISING;
 335:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc2, &InjectionConfig);
 336:Src/main.c    **** 
 337:Src/main.c    ****   /* Configure the 2nd injected conversion for NTC1 on Ch14 */
 338:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_14;
 339:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_2;
 340:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 341:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc2, &InjectionConfig);
 342:Src/main.c    **** 
 343:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_15;
 344:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_3;
 345:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 346:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc2, &InjectionConfig);
 347:Src/main.c    **** 
 348:Src/main.c    ****   /* Run the ADC calibration in single-ended mode */
 349:Src/main.c    ****   HAL_ADCEx_Calibration_Start(&hadc2, ADC_SINGLE_ENDED);
 350:Src/main.c    **** 
 351:Src/main.c    ****   /* Start ADC2 Injected Conversions */
 352:Src/main.c    ****   HAL_ADCEx_InjectedStart(&hadc2);
 353:Src/main.c    **** 
 354:Src/main.c    **** }
 355:Src/main.c    **** 
 356:Src/main.c    **** /* COMP2 init function */
 357:Src/main.c    **** static void MX_COMP2_Init(void)
 358:Src/main.c    **** {
 359:Src/main.c    **** 
 360:Src/main.c    ****   hcomp2.Instance = COMP2;
 361:Src/main.c    ****   hcomp2.Init.InvertingInput = COMP_INVERTINGINPUT_DAC1_CH1;
 362:Src/main.c    ****   hcomp2.Init.NonInvertingInput = COMP_NONINVERTINGINPUT_IO1;
 363:Src/main.c    ****   hcomp2.Init.Output = COMP_OUTPUT_TIM1BKIN;
 364:Src/main.c    ****   hcomp2.Init.OutputPol = COMP_OUTPUTPOL_NONINVERTED;
 365:Src/main.c    ****   hcomp2.Init.BlankingSrce = COMP_BLANKINGSRCE_NONE;
 366:Src/main.c    ****   hcomp2.Init.TriggerMode = COMP_TRIGGERMODE_NONE;
 367:Src/main.c    ****   if (HAL_COMP_Init(&hcomp2) != HAL_OK)
 368:Src/main.c    ****   {
 369:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 370:Src/main.c    ****   }
 371:Src/main.c    **** 
 372:Src/main.c    **** }
 373:Src/main.c    **** 
ARM GAS  /tmp/cc2KHXoi.s 			page 8


 374:Src/main.c    **** /* COMP4 init function */
 375:Src/main.c    **** static void MX_COMP4_Init(void)
 376:Src/main.c    **** {
 377:Src/main.c    **** 
 378:Src/main.c    ****   hcomp4.Instance = COMP4;
 379:Src/main.c    ****   hcomp4.Init.InvertingInput = COMP_INVERTINGINPUT_DAC1_CH2;
 380:Src/main.c    ****   hcomp4.Init.NonInvertingInput = COMP_NONINVERTINGINPUT_IO1;
 381:Src/main.c    ****   hcomp4.Init.Output = COMP_OUTPUT_TIM1BKIN;
 382:Src/main.c    ****   hcomp4.Init.OutputPol = COMP_OUTPUTPOL_NONINVERTED;
 383:Src/main.c    ****   hcomp4.Init.BlankingSrce = COMP_BLANKINGSRCE_NONE;
 384:Src/main.c    ****   hcomp4.Init.TriggerMode = COMP_TRIGGERMODE_NONE;
 385:Src/main.c    ****   if (HAL_COMP_Init(&hcomp4) != HAL_OK)
 386:Src/main.c    ****   {
 387:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 388:Src/main.c    ****   }
 389:Src/main.c    **** 
 390:Src/main.c    **** }
 391:Src/main.c    **** 
 392:Src/main.c    **** /* COMP6 init function */
 393:Src/main.c    **** static void MX_COMP6_Init(void)
 394:Src/main.c    **** {
 395:Src/main.c    **** 
 396:Src/main.c    ****   hcomp6.Instance = COMP6;
 397:Src/main.c    ****   hcomp6.Init.InvertingInput = COMP_INVERTINGINPUT_DAC2_CH1;
 398:Src/main.c    ****   hcomp6.Init.NonInvertingInput = COMP_NONINVERTINGINPUT_IO1;
 399:Src/main.c    ****   hcomp6.Init.Output = COMP_OUTPUT_TIM2IC2;
 400:Src/main.c    ****   hcomp6.Init.OutputPol = COMP_OUTPUTPOL_NONINVERTED;
 401:Src/main.c    ****   hcomp6.Init.BlankingSrce = COMP_BLANKINGSRCE_NONE;
 402:Src/main.c    ****   hcomp6.Init.TriggerMode = COMP_TRIGGERMODE_NONE;
 403:Src/main.c    ****   if (HAL_COMP_Init(&hcomp6) != HAL_OK)
 404:Src/main.c    ****   {
 405:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 406:Src/main.c    ****   }
 407:Src/main.c    **** 
 408:Src/main.c    **** }
 409:Src/main.c    **** 
 410:Src/main.c    **** /* DAC1 init function */
 411:Src/main.c    **** static void MX_DAC1_Init(void)
 412:Src/main.c    **** {
 413:Src/main.c    **** 
 414:Src/main.c    ****   DAC_ChannelConfTypeDef sConfig;
 415:Src/main.c    **** 
 416:Src/main.c    ****     /**DAC Initialization
 417:Src/main.c    ****     */
 418:Src/main.c    ****   hdac1.Instance = DAC1;
 419:Src/main.c    ****   if (HAL_DAC_Init(&hdac1) != HAL_OK)
 420:Src/main.c    ****   {
 421:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 422:Src/main.c    ****   }
 423:Src/main.c    **** 
 424:Src/main.c    ****     /**DAC channel OUT1 config
 425:Src/main.c    ****     */
 426:Src/main.c    ****   sConfig.DAC_Trigger = DAC_TRIGGER_NONE;
 427:Src/main.c    ****   sConfig.DAC_OutputBuffer = DAC_OUTPUTBUFFER_ENABLE;
 428:Src/main.c    ****   if (HAL_DAC_ConfigChannel(&hdac1, &sConfig, DAC_CHANNEL_1) != HAL_OK)
 429:Src/main.c    ****   {
 430:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
ARM GAS  /tmp/cc2KHXoi.s 			page 9


 431:Src/main.c    ****   }
 432:Src/main.c    **** 
 433:Src/main.c    ****     /**DAC channel OUT2 config
 434:Src/main.c    ****     */
 435:Src/main.c    ****   sConfig.DAC_OutputSwitch = DAC_OUTPUTSWITCH_DISABLE;
 436:Src/main.c    ****   if (HAL_DAC_ConfigChannel(&hdac1, &sConfig, DAC_CHANNEL_2) != HAL_OK)
 437:Src/main.c    ****   {
 438:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 439:Src/main.c    ****   }
 440:Src/main.c    **** 
 441:Src/main.c    **** }
 442:Src/main.c    **** 
 443:Src/main.c    **** /* DAC2 init function */
 444:Src/main.c    **** static void MX_DAC2_Init(void)
 445:Src/main.c    **** {
 446:Src/main.c    **** 
 447:Src/main.c    ****   DAC_ChannelConfTypeDef sConfig;
 448:Src/main.c    **** 
 449:Src/main.c    ****     /**DAC Initialization
 450:Src/main.c    ****     */
 451:Src/main.c    ****   hdac2.Instance = DAC2;
 452:Src/main.c    ****   if (HAL_DAC_Init(&hdac2) != HAL_OK)
 453:Src/main.c    ****   {
 454:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 455:Src/main.c    ****   }
 456:Src/main.c    **** 
 457:Src/main.c    ****     /**DAC channel OUT1 config
 458:Src/main.c    ****     */
 459:Src/main.c    ****   sConfig.DAC_Trigger = DAC_TRIGGER_NONE;
 460:Src/main.c    ****   sConfig.DAC_OutputSwitch = DAC_OUTPUTSWITCH_ENABLE;
 461:Src/main.c    ****   if (HAL_DAC_ConfigChannel(&hdac2, &sConfig, DAC_CHANNEL_1) != HAL_OK)
 462:Src/main.c    ****   {
 463:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 464:Src/main.c    ****   }
 465:Src/main.c    **** 
 466:Src/main.c    **** }
 467:Src/main.c    **** 
 468:Src/main.c    **** /**
 469:Src/main.c    **** * @brief  HRTIM configuration
 470:Src/main.c    **** * @param  None
 471:Src/main.c    **** * @retval None
 472:Src/main.c    **** */
 473:Src/main.c    **** static void HRTIM_Config(void)
 474:Src/main.c    **** {
 475:Src/main.c    ****   HRTIM_TimeBaseCfgTypeDef timebase_config;
 476:Src/main.c    ****   HRTIM_TimerCfgTypeDef timer_config;
 477:Src/main.c    ****   HRTIM_OutputCfgTypeDef output_config_TA1_TA2;
 478:Src/main.c    ****   HRTIM_CompareCfgTypeDef compare_config;
 479:Src/main.c    ****   HRTIM_DeadTimeCfgTypeDef HRTIM_TIM_DeadTimeConfig;
 480:Src/main.c    ****   HRTIM_ADCTriggerCfgTypeDef adc_trigger_config;
 481:Src/main.c    ****   HRTIM_FaultCfgTypeDef fault_config;
 482:Src/main.c    **** 
 483:Src/main.c    ****   /* ----------------------------*/
 484:Src/main.c    ****   /* HRTIM Global initialization */
 485:Src/main.c    ****   /* ----------------------------*/
 486:Src/main.c    ****   /* Initialize the hrtim structure (minimal configuration) */
 487:Src/main.c    ****   hhrtim1.Instance = HRTIM1;
ARM GAS  /tmp/cc2KHXoi.s 			page 10


 488:Src/main.c    ****   hhrtim1.Init.HRTIMInterruptResquests = HRTIM_IT_NONE;
 489:Src/main.c    ****   hhrtim1.Init.SyncOptions = HRTIM_SYNCOPTION_NONE;
 490:Src/main.c    **** 
 491:Src/main.c    ****   /* Initialize HRTIM */
 492:Src/main.c    ****   HAL_HRTIM_Init(&hhrtim1);
 493:Src/main.c    **** 
 494:Src/main.c    ****   /* HRTIM DLL calibration: periodic calibration, set period to 14\B5s */
 495:Src/main.c    ****   //HAL_HRTIM_DLLCalibrationStart(&hhrtim, HRTIM_CALIBRATIONRATE_14);
 496:Src/main.c    ****   /* Wait calibration completion*/
 497:Src/main.c    ****   //if (HAL_HRTIM_PollForDLLCalibration(&hhrtim, 100) != HAL_OK)
 498:Src/main.c    ****   //{
 499:Src/main.c    ****   //  Error_Handler(); // if DLL or clock is not correctly set
 500:Src/main.c    ****   //}
 501:Src/main.c    **** 
 502:Src/main.c    ****   /* --------------------------------------------------- */
 503:Src/main.c    ****   /* TIMERA initialization: timer mode and PWM frequency */
 504:Src/main.c    ****   /* --------------------------------------------------- */
 505:Src/main.c    ****   timebase_config.Period = BUCK_PWM_PERIOD; /* 280kHz switching frequency */
 506:Src/main.c    ****   timebase_config.RepetitionCounter = 63; /* 1 ISR every 128 PWM periods */
 507:Src/main.c    ****   timebase_config.PrescalerRatio = HRTIM_PRESCALERRATIO_MUL32;
 508:Src/main.c    ****   timebase_config.Mode = HRTIM_MODE_CONTINUOUS;
 509:Src/main.c    ****   HAL_HRTIM_TimeBaseConfig(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, &timebase_config);
 510:Src/main.c    **** 
 511:Src/main.c    **** 
 512:Src/main.c    ****   /* --------------------------------------------------------------------- */
 513:Src/main.c    ****   /* TIMERA global configuration: cnt reset, sync, update, fault, burst... */
 514:Src/main.c    ****   /* timer running in continuous mode, with deadtime enabled               */
 515:Src/main.c    ****   /* --------------------------------------------------------------------- */
 516:Src/main.c    ****   timer_config.DMARequests = HRTIM_TIM_DMA_NONE;
 517:Src/main.c    ****   timer_config.DMASrcAddress = 0x0;
 518:Src/main.c    ****   timer_config.DMADstAddress = 0x0;
 519:Src/main.c    ****   timer_config.DMASize = 0x0;
 520:Src/main.c    ****   timer_config.HalfModeEnable = HRTIM_HALFMODE_DISABLED;
 521:Src/main.c    ****   timer_config.StartOnSync = HRTIM_SYNCSTART_DISABLED;
 522:Src/main.c    ****   timer_config.ResetOnSync = HRTIM_SYNCRESET_DISABLED;
 523:Src/main.c    ****   timer_config.DACSynchro = HRTIM_DACSYNC_NONE;
 524:Src/main.c    ****   timer_config.PreloadEnable = HRTIM_PRELOAD_ENABLED;
 525:Src/main.c    ****   timer_config.UpdateGating = HRTIM_UPDATEGATING_INDEPENDENT;
 526:Src/main.c    ****   timer_config.BurstMode = HRTIM_TIMERBURSTMODE_MAINTAINCLOCK;
 527:Src/main.c    ****   timer_config.RepetitionUpdate = HRTIM_UPDATEONREPETITION_ENABLED;
 528:Src/main.c    ****   timer_config.ResetUpdate = HRTIM_TIMUPDATEONRESET_DISABLED;
 529:Src/main.c    ****   timer_config.InterruptRequests = HRTIM_TIM_IT_REP;
 530:Src/main.c    ****   timer_config.PushPull = HRTIM_TIMPUSHPULLMODE_DISABLED;
 531:Src/main.c    ****   timer_config.FaultEnable = HRTIM_TIMFAULTENABLE_FAULT1;
 532:Src/main.c    ****   timer_config.FaultLock = HRTIM_TIMFAULTLOCK_READWRITE;
 533:Src/main.c    ****   timer_config.DeadTimeInsertion = HRTIM_TIMDEADTIMEINSERTION_ENABLED;
 534:Src/main.c    ****   timer_config.DelayedProtectionMode = HRTIM_TIMER_A_B_C_DELAYEDPROTECTION_DISABLED;
 535:Src/main.c    ****   timer_config.UpdateTrigger= HRTIM_TIMUPDATETRIGGER_NONE;
 536:Src/main.c    ****   timer_config.ResetTrigger = HRTIM_TIMRESETTRIGGER_NONE;
 537:Src/main.c    ****   HAL_HRTIM_WaveformTimerConfig(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, &timer_config);
 538:Src/main.c    **** 
 539:Src/main.c    ****   /* --------------------------------- */
 540:Src/main.c    ****   /* TA1 and TA2 waveforms description */
 541:Src/main.c    ****   /* --------------------------------- */
 542:Src/main.c    ****   output_config_TA1_TA2.Polarity = HRTIM_OUTPUTPOLARITY_HIGH;
 543:Src/main.c    ****   output_config_TA1_TA2.SetSource = HRTIM_OUTPUTSET_TIMPER;
 544:Src/main.c    ****   output_config_TA1_TA2.ResetSource  = HRTIM_OUTPUTRESET_TIMCMP1;
ARM GAS  /tmp/cc2KHXoi.s 			page 11


 545:Src/main.c    ****   output_config_TA1_TA2.IdleMode = HRTIM_OUTPUTIDLEMODE_NONE;
 546:Src/main.c    ****   output_config_TA1_TA2.IdleLevel = HRTIM_OUTPUTIDLELEVEL_INACTIVE;
 547:Src/main.c    ****   output_config_TA1_TA2.FaultLevel = HRTIM_OUTPUTFAULTLEVEL_INACTIVE;
 548:Src/main.c    ****   output_config_TA1_TA2.ChopperModeEnable = HRTIM_OUTPUTCHOPPERMODE_DISABLED;
 549:Src/main.c    ****   output_config_TA1_TA2.BurstModeEntryDelayed = HRTIM_OUTPUTBURSTMODEENTRY_REGULAR;
 550:Src/main.c    ****   HAL_HRTIM_WaveformOutputConfig(&hhrtim1,
 551:Src/main.c    ****                                  HRTIM_TIMERINDEX_TIMER_A,
 552:Src/main.c    ****                                  HRTIM_OUTPUT_TA1,
 553:Src/main.c    ****                                  &output_config_TA1_TA2);
 554:Src/main.c    **** 
 555:Src/main.c    ****   HAL_HRTIM_WaveformOutputConfig(&hhrtim1,
 556:Src/main.c    ****                                  HRTIM_TIMERINDEX_TIMER_A,
 557:Src/main.c    ****                                  HRTIM_OUTPUT_TA2,
 558:Src/main.c    ****                                  &output_config_TA1_TA2);
 559:Src/main.c    **** 
 560:Src/main.c    ****   /* Set compare registers for duty cycle on TA1 */
 561:Src/main.c    ****   compare_config.CompareValue = BUCK_PWM_PERIOD - 1;
 562:Src/main.c    ****   HAL_HRTIM_WaveformCompareConfig(&hhrtim1,
 563:Src/main.c    ****                                   HRTIM_TIMERINDEX_TIMER_A,
 564:Src/main.c    ****                                   HRTIM_COMPAREUNIT_1,
 565:Src/main.c    ****                                   &compare_config);
 566:Src/main.c    **** 
 567:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.FallingLock = HRTIM_TIMDEADTIME_FALLINGLOCK_WRITE;
 568:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.FallingSign = HRTIM_TIMDEADTIME_FALLINGSIGN_POSITIVE;
 569:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.FallingSignLock = HRTIM_TIMDEADTIME_FALLINGSIGNLOCK_READONLY;
 570:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.FallingValue = DT_FALLING;
 571:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.Prescaler = HRTIM_TIMDEADTIME_PRESCALERRATIO_MUL8;
 572:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.RisingLock = HRTIM_TIMDEADTIME_RISINGLOCK_WRITE;
 573:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.RisingSign = HRTIM_TIMDEADTIME_RISINGSIGN_POSITIVE;
 574:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.RisingSignLock = HRTIM_TIMDEADTIME_RISINGSIGNLOCK_READONLY;
 575:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.RisingValue = DT_RISING;
 576:Src/main.c    ****   HAL_HRTIM_DeadTimeConfig(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, &HRTIM_TIM_DeadTimeConfig);
 577:Src/main.c    **** 
 578:Src/main.c    ****   /* ------------------------------------------- */
 579:Src/main.c    ****   /* ADC trigger intialization (with CMP2 event) */
 580:Src/main.c    ****   /* ------------------------------------------- */
 581:Src/main.c    ****   compare_config.AutoDelayedMode = HRTIM_AUTODELAYEDMODE_REGULAR;
 582:Src/main.c    ****   compare_config.AutoDelayedTimeout = 0;
 583:Src/main.c    ****   compare_config.CompareValue = BUCK_PWM_PERIOD/10; /* Samples in middle of ON time */
 584:Src/main.c    ****   HAL_HRTIM_WaveformCompareConfig(&hhrtim1,
 585:Src/main.c    ****                                   HRTIM_TIMERINDEX_TIMER_A,
 586:Src/main.c    ****                                   HRTIM_COMPAREUNIT_2,
 587:Src/main.c    ****                                   &compare_config);
 588:Src/main.c    **** 
 589:Src/main.c    ****   adc_trigger_config.Trigger = HRTIM_ADCTRIGGEREVENT24_TIMERA_CMP2;
 590:Src/main.c    ****   adc_trigger_config.UpdateSource = HRTIM_ADCTRIGGERUPDATE_TIMER_A;
 591:Src/main.c    ****   HAL_HRTIM_ADCTriggerConfig(&hhrtim1,
 592:Src/main.c    ****                              HRTIM_ADCTRIGGER_2,
 593:Src/main.c    ****                              &adc_trigger_config);
 594:Src/main.c    **** 
 595:Src/main.c    **** 
 596:Src/main.c    ****   /* ---------------------*/
 597:Src/main.c    ****   /* FAULT initialization */
 598:Src/main.c    ****   /* ---------------------*/
 599:Src/main.c    ****   //fault_config.Filter = HRTIM_FAULTFILTER_NONE;
 600:Src/main.c    ****   //fault_config.Lock = HRTIM_FAULTLOCK_READWRITE;
 601:Src/main.c    ****   //fault_config.Polarity = HRTIM_FAULTPOLARITY_LOW;
ARM GAS  /tmp/cc2KHXoi.s 			page 12


 602:Src/main.c    ****   //fault_config.Source = HRTIM_FAULTSOURCE_DIGITALINPUT;
 603:Src/main.c    ****   //HAL_HRTIM_FaultConfig(&hhrtim1,
 604:Src/main.c    ****   //                      HRTIM_FAULT_1,
 605:Src/main.c    ****   //                      &fault_config);
 606:Src/main.c    **** 
 607:Src/main.c    ****   //HAL_HRTIM_FaultModeCtl(&hhrtim1,
 608:Src/main.c    ****   //                      HRTIM_FAULT_1,
 609:Src/main.c    ****   //                      HRTIM_FAULTMODECTL_ENABLED);
 610:Src/main.c    **** 
 611:Src/main.c    ****   /* ---------------*/
 612:Src/main.c    ****   /* HRTIM start-up */
 613:Src/main.c    ****   /* ---------------*/
 614:Src/main.c    ****   /* Enable HRTIM's outputs TA1 and TA2 */
 615:Src/main.c    ****   /* Note: it is necessary to enable also GPIOs to have outputs functional */
 616:Src/main.c    ****   /* This must be done after HRTIM initialization */
 617:Src/main.c    ****   HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TA1 | HRTIM_OUTPUT_TA2);
 618:Src/main.c    **** 
 619:Src/main.c    ****   /* Start HRTIM's TIMER A */
 620:Src/main.c    ****   HAL_HRTIM_WaveformCounterStart_IT(&hhrtim1, HRTIM_TIMERID_TIMER_A);
 621:Src/main.c    ****   HAL_HRTIM_MspPostInit(&hhrtim1);
 622:Src/main.c    **** }
 623:Src/main.c    **** 
 624:Src/main.c    **** 
 625:Src/main.c    **** /* TIM2 init function */
 626:Src/main.c    **** static void MX_TIM2_Init(void)
 627:Src/main.c    **** {
 628:Src/main.c    **** 
 629:Src/main.c    ****   TIM_ClockConfigTypeDef sClockSourceConfig;
 630:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig;
 631:Src/main.c    ****   TIM_IC_InitTypeDef sConfigIC;
 632:Src/main.c    **** 
 633:Src/main.c    ****   htim2.Instance = TIM2;
 634:Src/main.c    ****   htim2.Init.Prescaler = 0;
 635:Src/main.c    ****   htim2.Init.CounterMode = TIM_COUNTERMODE_UP;
 636:Src/main.c    ****   htim2.Init.Period = 0;
 637:Src/main.c    ****   htim2.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 638:Src/main.c    ****   htim2.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 639:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim2) != HAL_OK)
 640:Src/main.c    ****   {
 641:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 642:Src/main.c    ****   }
 643:Src/main.c    **** 
 644:Src/main.c    ****   sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
 645:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim2, &sClockSourceConfig) != HAL_OK)
 646:Src/main.c    ****   {
 647:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 648:Src/main.c    ****   }
 649:Src/main.c    **** 
 650:Src/main.c    ****   if (HAL_TIM_IC_Init(&htim2) != HAL_OK)
 651:Src/main.c    ****   {
 652:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 653:Src/main.c    ****   }
 654:Src/main.c    **** 
 655:Src/main.c    ****   sMasterConfig.MasterOutputTrigger = TIM_TRGO_RESET;
 656:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 657:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim2, &sMasterConfig) != HAL_OK)
 658:Src/main.c    ****   {
ARM GAS  /tmp/cc2KHXoi.s 			page 13


 659:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 660:Src/main.c    ****   }
 661:Src/main.c    **** 
 662:Src/main.c    ****   sConfigIC.ICPolarity = TIM_INPUTCHANNELPOLARITY_RISING;
 663:Src/main.c    ****   sConfigIC.ICSelection = TIM_ICSELECTION_DIRECTTI;
 664:Src/main.c    ****   sConfigIC.ICPrescaler = TIM_ICPSC_DIV1;
 665:Src/main.c    ****   sConfigIC.ICFilter = 0;
 666:Src/main.c    ****   if (HAL_TIM_IC_ConfigChannel(&htim2, &sConfigIC, TIM_CHANNEL_1) != HAL_OK)
 667:Src/main.c    ****   {
 668:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 669:Src/main.c    ****   }
 670:Src/main.c    **** 
 671:Src/main.c    **** }
 672:Src/main.c    **** 
 673:Src/main.c    **** /* TIM3 init function */
 674:Src/main.c    **** static void MX_TIM3_Init(void)
 675:Src/main.c    **** {
 676:Src/main.c    **** 
 677:Src/main.c    ****   TIM_ClockConfigTypeDef sClockSourceConfig;
 678:Src/main.c    ****   TIM_MasterConfigTypeDef sMasterConfig;
 679:Src/main.c    ****   TIM_OC_InitTypeDef sConfigOC;
 680:Src/main.c    **** 
 681:Src/main.c    ****   htim3.Instance = TIM3;
 682:Src/main.c    ****   htim3.Init.Prescaler = 16;
 683:Src/main.c    ****   htim3.Init.CounterMode = TIM_COUNTERMODE_UP;
 684:Src/main.c    ****   htim3.Init.Period = 255;
 685:Src/main.c    ****   htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
 686:Src/main.c    ****   htim3.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
 687:Src/main.c    ****   if (HAL_TIM_Base_Init(&htim3) != HAL_OK)
 688:Src/main.c    ****   {
 689:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 690:Src/main.c    ****   }
 691:Src/main.c    **** 
 692:Src/main.c    ****   sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
 693:Src/main.c    ****   if (HAL_TIM_ConfigClockSource(&htim3, &sClockSourceConfig) != HAL_OK)
 694:Src/main.c    ****   {
 695:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 696:Src/main.c    ****   }
 697:Src/main.c    **** 
 698:Src/main.c    ****   if (HAL_TIM_PWM_Init(&htim3) != HAL_OK)
 699:Src/main.c    ****   {
 700:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 701:Src/main.c    ****   }
 702:Src/main.c    **** 
 703:Src/main.c    ****   sMasterConfig.MasterOutputTrigger = TIM_TRGO_RESET;
 704:Src/main.c    ****   sMasterConfig.MasterSlaveMode = TIM_MASTERSLAVEMODE_DISABLE;
 705:Src/main.c    ****   if (HAL_TIMEx_MasterConfigSynchronization(&htim3, &sMasterConfig) != HAL_OK)
 706:Src/main.c    ****   {
 707:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 708:Src/main.c    ****   }
 709:Src/main.c    **** 
 710:Src/main.c    ****   sConfigOC.OCMode = TIM_OCMODE_PWM1;
 711:Src/main.c    ****   sConfigOC.Pulse = 0;
 712:Src/main.c    ****   sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH;
 713:Src/main.c    ****   sConfigOC.OCFastMode = TIM_OCFAST_DISABLE;
 714:Src/main.c    ****   if (HAL_TIM_PWM_ConfigChannel(&htim3, &sConfigOC, TIM_CHANNEL_1) != HAL_OK)
 715:Src/main.c    ****   {
ARM GAS  /tmp/cc2KHXoi.s 			page 14


 716:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 717:Src/main.c    ****   }
 718:Src/main.c    **** 
 719:Src/main.c    ****   HAL_TIM_MspPostInit(&htim3);
 720:Src/main.c    **** 
 721:Src/main.c    **** }
 722:Src/main.c    **** 
 723:Src/main.c    **** /* USART1 init function */
 724:Src/main.c    **** static void MX_USART1_UART_Init(void)
 725:Src/main.c    **** {
 726:Src/main.c    **** 
 727:Src/main.c    ****   huart1.Instance = USART1;
 728:Src/main.c    ****   huart1.Init.BaudRate = 115200;
 729:Src/main.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 730:Src/main.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 731:Src/main.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 732:Src/main.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 733:Src/main.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 734:Src/main.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 735:Src/main.c    ****   huart1.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
 736:Src/main.c    ****   huart1.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
 737:Src/main.c    ****   if (HAL_UART_Init(&huart1) != HAL_OK)
 738:Src/main.c    ****   {
 739:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 740:Src/main.c    ****   }
 741:Src/main.c    **** 
 742:Src/main.c    **** }
 743:Src/main.c    **** 
 744:Src/main.c    **** /* USART3 init function */
 745:Src/main.c    **** static void MX_USART3_UART_Init(void)
 746:Src/main.c    **** {
 747:Src/main.c    **** 
 748:Src/main.c    ****   huart3.Instance = USART3;
 749:Src/main.c    ****   huart3.Init.BaudRate = 115200;
 750:Src/main.c    ****   huart3.Init.WordLength = UART_WORDLENGTH_8B;
 751:Src/main.c    ****   huart3.Init.StopBits = UART_STOPBITS_1;
 752:Src/main.c    ****   huart3.Init.Parity = UART_PARITY_NONE;
 753:Src/main.c    ****   huart3.Init.Mode = UART_MODE_TX_RX;
 754:Src/main.c    ****   huart3.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 755:Src/main.c    ****   huart3.Init.OverSampling = UART_OVERSAMPLING_16;
 756:Src/main.c    ****   huart3.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
 757:Src/main.c    ****   huart3.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
 758:Src/main.c    ****   if (HAL_UART_Init(&huart3) != HAL_OK)
 759:Src/main.c    ****   {
 760:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 761:Src/main.c    ****   }
 762:Src/main.c    **** 
 763:Src/main.c    **** }
 764:Src/main.c    **** 
 765:Src/main.c    **** /**
 766:Src/main.c    ****   * Enable DMA controller clock
 767:Src/main.c    ****   */
 768:Src/main.c    **** static void MX_DMA_Init(void)
 769:Src/main.c    **** {
 770:Src/main.c    ****   /* DMA controller clock enable */
 771:Src/main.c    ****   __HAL_RCC_DMA1_CLK_ENABLE();
 772:Src/main.c    **** 
ARM GAS  /tmp/cc2KHXoi.s 			page 15


 773:Src/main.c    ****   /* DMA interrupt init */
 774:Src/main.c    ****   /* DMA1_Channel1_IRQn interrupt configuration */
 775:Src/main.c    ****   HAL_NVIC_SetPriority(DMA1_Channel1_IRQn, 0, 0);
 776:Src/main.c    ****   HAL_NVIC_EnableIRQ(DMA1_Channel1_IRQn);
 777:Src/main.c    ****   /* DMA1_Channel2_IRQn interrupt configuration */
 778:Src/main.c    ****   HAL_NVIC_SetPriority(DMA1_Channel2_IRQn, 0, 0);
 779:Src/main.c    ****   HAL_NVIC_EnableIRQ(DMA1_Channel2_IRQn);
 780:Src/main.c    ****   /* DMA1_Channel4_IRQn interrupt configuration */
 781:Src/main.c    ****   HAL_NVIC_SetPriority(DMA1_Channel4_IRQn, 0, 0);
 782:Src/main.c    ****   HAL_NVIC_EnableIRQ(DMA1_Channel4_IRQn);
 783:Src/main.c    ****   /* DMA1_Channel5_IRQn interrupt configuration */
 784:Src/main.c    ****   HAL_NVIC_SetPriority(DMA1_Channel5_IRQn, 0, 0);
 785:Src/main.c    ****   HAL_NVIC_EnableIRQ(DMA1_Channel5_IRQn);
 786:Src/main.c    **** 
 787:Src/main.c    **** }
 788:Src/main.c    **** 
 789:Src/main.c    **** /** Configure pins as
 790:Src/main.c    ****         * Analog
 791:Src/main.c    ****         * Input
 792:Src/main.c    ****         * Output
 793:Src/main.c    ****         * EVENT_OUT
 794:Src/main.c    ****         * EXTI
 795:Src/main.c    ****      PA7   ------> SharedAnalog_PA7
 796:Src/main.c    **** */
 797:Src/main.c    **** static void MX_GPIO_Init(void)
 798:Src/main.c    **** {
  28              		.loc 1 798 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 32
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
  37 0002 88B0     		sub	sp, sp, #32
  38              	.LCFI1:
  39              		.cfi_def_cfa_offset 40
  40              	.LBB2:
 799:Src/main.c    **** 
 800:Src/main.c    ****   GPIO_InitTypeDef GPIO_InitStruct;
 801:Src/main.c    **** 
 802:Src/main.c    ****   /* GPIO Ports Clock Enable */
 803:Src/main.c    ****   __HAL_RCC_GPIOF_CLK_ENABLE();
  41              		.loc 1 803 0
  42 0004 1C4B     		ldr	r3, .L2
  43 0006 5A69     		ldr	r2, [r3, #20]
  44 0008 42F48002 		orr	r2, r2, #4194304
  45 000c 5A61     		str	r2, [r3, #20]
  46 000e 5A69     		ldr	r2, [r3, #20]
  47 0010 02F48002 		and	r2, r2, #4194304
  48 0014 0092     		str	r2, [sp]
  49 0016 009A     		ldr	r2, [sp]
  50              	.LBE2:
  51              	.LBB3:
 804:Src/main.c    ****   __HAL_RCC_GPIOA_CLK_ENABLE();
  52              		.loc 1 804 0
ARM GAS  /tmp/cc2KHXoi.s 			page 16


  53 0018 5A69     		ldr	r2, [r3, #20]
  54 001a 42F40032 		orr	r2, r2, #131072
  55 001e 5A61     		str	r2, [r3, #20]
  56 0020 5A69     		ldr	r2, [r3, #20]
  57 0022 02F40032 		and	r2, r2, #131072
  58 0026 0192     		str	r2, [sp, #4]
  59 0028 019A     		ldr	r2, [sp, #4]
  60              	.LBE3:
  61              	.LBB4:
 805:Src/main.c    ****   __HAL_RCC_GPIOB_CLK_ENABLE();
  62              		.loc 1 805 0
  63 002a 5A69     		ldr	r2, [r3, #20]
  64 002c 42F48022 		orr	r2, r2, #262144
  65 0030 5A61     		str	r2, [r3, #20]
  66 0032 5B69     		ldr	r3, [r3, #20]
  67 0034 03F48023 		and	r3, r3, #262144
  68 0038 0293     		str	r3, [sp, #8]
  69 003a 029B     		ldr	r3, [sp, #8]
  70              	.LBE4:
 806:Src/main.c    **** 
 807:Src/main.c    ****   /*Configure GPIO pin Output Level */
 808:Src/main.c    ****   HAL_GPIO_WritePin(GPIOA, LED_READY_Pin|LED_ACT_Pin|LED_FAULT_Pin, GPIO_PIN_RESET);
  71              		.loc 1 808 0
  72 003c 4FF09040 		mov	r0, #1207959552
  73 0040 0B21     		movs	r1, #11
  74 0042 0022     		movs	r2, #0
  75 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
  76              	.LVL0:
 809:Src/main.c    **** 
 810:Src/main.c    ****   /*Configure GPIO pins : LED_READY_Pin LED_ACT_Pin LED_FAULT_Pin */
 811:Src/main.c    ****   GPIO_InitStruct.Pin = LED_READY_Pin|LED_ACT_Pin|LED_FAULT_Pin;
  77              		.loc 1 811 0
  78 0048 0B23     		movs	r3, #11
  79 004a 0393     		str	r3, [sp, #12]
 812:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  80              		.loc 1 812 0
  81 004c 0123     		movs	r3, #1
  82 004e 0493     		str	r3, [sp, #16]
 813:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
  83              		.loc 1 813 0
  84 0050 0024     		movs	r4, #0
  85 0052 0594     		str	r4, [sp, #20]
 814:Src/main.c    ****   GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  86              		.loc 1 814 0
  87 0054 0694     		str	r4, [sp, #24]
 815:Src/main.c    ****   HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);
  88              		.loc 1 815 0
  89 0056 4FF09040 		mov	r0, #1207959552
  90 005a 03A9     		add	r1, sp, #12
  91 005c FFF7FEFF 		bl	HAL_GPIO_Init
  92              	.LVL1:
 816:Src/main.c    **** 
 817:Src/main.c    ****   /*Configure GPIO pin : PA7 */
 818:Src/main.c    ****   GPIO_InitStruct.Pin = GPIO_PIN_7;
  93              		.loc 1 818 0
  94 0060 8023     		movs	r3, #128
  95 0062 0393     		str	r3, [sp, #12]
ARM GAS  /tmp/cc2KHXoi.s 			page 17


 819:Src/main.c    ****   GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  96              		.loc 1 819 0
  97 0064 0323     		movs	r3, #3
  98 0066 0493     		str	r3, [sp, #16]
 820:Src/main.c    ****   GPIO_InitStruct.Pull = GPIO_NOPULL;
  99              		.loc 1 820 0
 100 0068 0594     		str	r4, [sp, #20]
 821:Src/main.c    ****   HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);
 101              		.loc 1 821 0
 102 006a 4FF09040 		mov	r0, #1207959552
 103 006e 03A9     		add	r1, sp, #12
 104 0070 FFF7FEFF 		bl	HAL_GPIO_Init
 105              	.LVL2:
 822:Src/main.c    **** 
 823:Src/main.c    **** }
 106              		.loc 1 823 0
 107 0074 08B0     		add	sp, sp, #32
 108              		@ sp needed
 109 0076 10BD     		pop	{r4, pc}
 110              	.L3:
 111              		.align	2
 112              	.L2:
 113 0078 00100240 		.word	1073876992
 114              		.cfi_endproc
 115              	.LFE139:
 117              		.section	.text.MX_DMA_Init,"ax",%progbits
 118              		.align	2
 119              		.thumb
 120              		.thumb_func
 122              	MX_DMA_Init:
 123              	.LFB138:
 769:Src/main.c    **** {
 124              		.loc 1 769 0
 125              		.cfi_startproc
 126              		@ args = 0, pretend = 0, frame = 8
 127              		@ frame_needed = 0, uses_anonymous_args = 0
 128 0000 00B5     		push	{lr}
 129              	.LCFI2:
 130              		.cfi_def_cfa_offset 4
 131              		.cfi_offset 14, -4
 132 0002 83B0     		sub	sp, sp, #12
 133              	.LCFI3:
 134              		.cfi_def_cfa_offset 16
 135              	.LBB5:
 771:Src/main.c    ****   __HAL_RCC_DMA1_CLK_ENABLE();
 136              		.loc 1 771 0
 137 0004 164B     		ldr	r3, .L5
 138 0006 5A69     		ldr	r2, [r3, #20]
 139 0008 42F00102 		orr	r2, r2, #1
 140 000c 5A61     		str	r2, [r3, #20]
 141 000e 5B69     		ldr	r3, [r3, #20]
 142 0010 03F00103 		and	r3, r3, #1
 143 0014 0193     		str	r3, [sp, #4]
 144 0016 019B     		ldr	r3, [sp, #4]
 145              	.LBE5:
 775:Src/main.c    ****   HAL_NVIC_SetPriority(DMA1_Channel1_IRQn, 0, 0);
 146              		.loc 1 775 0
ARM GAS  /tmp/cc2KHXoi.s 			page 18


 147 0018 0B20     		movs	r0, #11
 148 001a 0021     		movs	r1, #0
 149 001c 0A46     		mov	r2, r1
 150 001e FFF7FEFF 		bl	HAL_NVIC_SetPriority
 151              	.LVL3:
 776:Src/main.c    ****   HAL_NVIC_EnableIRQ(DMA1_Channel1_IRQn);
 152              		.loc 1 776 0
 153 0022 0B20     		movs	r0, #11
 154 0024 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 155              	.LVL4:
 778:Src/main.c    ****   HAL_NVIC_SetPriority(DMA1_Channel2_IRQn, 0, 0);
 156              		.loc 1 778 0
 157 0028 0C20     		movs	r0, #12
 158 002a 0021     		movs	r1, #0
 159 002c 0A46     		mov	r2, r1
 160 002e FFF7FEFF 		bl	HAL_NVIC_SetPriority
 161              	.LVL5:
 779:Src/main.c    ****   HAL_NVIC_EnableIRQ(DMA1_Channel2_IRQn);
 162              		.loc 1 779 0
 163 0032 0C20     		movs	r0, #12
 164 0034 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 165              	.LVL6:
 781:Src/main.c    ****   HAL_NVIC_SetPriority(DMA1_Channel4_IRQn, 0, 0);
 166              		.loc 1 781 0
 167 0038 0E20     		movs	r0, #14
 168 003a 0021     		movs	r1, #0
 169 003c 0A46     		mov	r2, r1
 170 003e FFF7FEFF 		bl	HAL_NVIC_SetPriority
 171              	.LVL7:
 782:Src/main.c    ****   HAL_NVIC_EnableIRQ(DMA1_Channel4_IRQn);
 172              		.loc 1 782 0
 173 0042 0E20     		movs	r0, #14
 174 0044 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 175              	.LVL8:
 784:Src/main.c    ****   HAL_NVIC_SetPriority(DMA1_Channel5_IRQn, 0, 0);
 176              		.loc 1 784 0
 177 0048 0F20     		movs	r0, #15
 178 004a 0021     		movs	r1, #0
 179 004c 0A46     		mov	r2, r1
 180 004e FFF7FEFF 		bl	HAL_NVIC_SetPriority
 181              	.LVL9:
 785:Src/main.c    ****   HAL_NVIC_EnableIRQ(DMA1_Channel5_IRQn);
 182              		.loc 1 785 0
 183 0052 0F20     		movs	r0, #15
 184 0054 FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 185              	.LVL10:
 787:Src/main.c    **** }
 186              		.loc 1 787 0
 187 0058 03B0     		add	sp, sp, #12
 188              		@ sp needed
 189 005a 5DF804FB 		ldr	pc, [sp], #4
 190              	.L6:
 191 005e 00BF     		.align	2
 192              	.L5:
 193 0060 00100240 		.word	1073876992
 194              		.cfi_endproc
 195              	.LFE138:
ARM GAS  /tmp/cc2KHXoi.s 			page 19


 197              		.section	.text.ADC1_Config,"ax",%progbits
 198              		.align	2
 199              		.thumb
 200              		.thumb_func
 202              	ADC1_Config:
 203              	.LFB126:
 227:Src/main.c    **** {
 204              		.loc 1 227 0
 205              		.cfi_startproc
 206              		@ args = 0, pretend = 0, frame = 64
 207              		@ frame_needed = 0, uses_anonymous_args = 0
 208 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 209              	.LCFI4:
 210              		.cfi_def_cfa_offset 20
 211              		.cfi_offset 4, -20
 212              		.cfi_offset 5, -16
 213              		.cfi_offset 6, -12
 214              		.cfi_offset 7, -8
 215              		.cfi_offset 14, -4
 216 0002 91B0     		sub	sp, sp, #68
 217              	.LCFI5:
 218              		.cfi_def_cfa_offset 88
 231:Src/main.c    ****   hadc1.Instance = ADC1;
 219              		.loc 1 231 0
 220 0004 274C     		ldr	r4, .L8
 221 0006 4FF0A043 		mov	r3, #1342177280
 222 000a 2360     		str	r3, [r4]
 234:Src/main.c    ****   MultiModeConfig.DMAAccessMode = ADC_DMAACCESSMODE_DISABLED;
 223              		.loc 1 234 0
 224 000c 0025     		movs	r5, #0
 225 000e 0E95     		str	r5, [sp, #56]
 235:Src/main.c    ****   MultiModeConfig.Mode = ADC_MODE_INDEPENDENT;
 226              		.loc 1 235 0
 227 0010 0D95     		str	r5, [sp, #52]
 236:Src/main.c    ****   MultiModeConfig.TwoSamplingDelay = ADC_TWOSAMPLINGDELAY_1CYCLE;
 228              		.loc 1 236 0
 229 0012 0F95     		str	r5, [sp, #60]
 237:Src/main.c    ****   HAL_ADCEx_MultiModeConfigChannel(&hadc1, &MultiModeConfig);
 230              		.loc 1 237 0
 231 0014 2046     		mov	r0, r4
 232 0016 0DA9     		add	r1, sp, #52
 233 0018 FFF7FEFF 		bl	HAL_ADCEx_MultiModeConfigChannel
 234              	.LVL11:
 241:Src/main.c    ****   hadc1.Init.ClockPrescaler = ADC_CLOCK_ASYNC_DIV1;
 235              		.loc 1 241 0
 236 001c 6560     		str	r5, [r4, #4]
 242:Src/main.c    ****   hadc1.Init.Resolution = ADC_RESOLUTION_12B;
 237              		.loc 1 242 0
 238 001e A560     		str	r5, [r4, #8]
 243:Src/main.c    ****   hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
 239              		.loc 1 243 0
 240 0020 E560     		str	r5, [r4, #12]
 244:Src/main.c    ****   hadc1.Init.ScanConvMode = ENABLE;
 241              		.loc 1 244 0
 242 0022 0126     		movs	r6, #1
 243 0024 2661     		str	r6, [r4, #16]
 245:Src/main.c    ****   hadc1.Init.EOCSelection = ADC_EOC_SINGLE_CONV;
ARM GAS  /tmp/cc2KHXoi.s 			page 20


 244              		.loc 1 245 0
 245 0026 0427     		movs	r7, #4
 246 0028 6761     		str	r7, [r4, #20]
 246:Src/main.c    ****   hadc1.Init.LowPowerAutoWait = DISABLE;
 247              		.loc 1 246 0
 248 002a A561     		str	r5, [r4, #24]
 247:Src/main.c    ****   hadc1.Init.ContinuousConvMode = DISABLE;
 249              		.loc 1 247 0
 250 002c E561     		str	r5, [r4, #28]
 248:Src/main.c    ****   hadc1.Init.NbrOfConversion = 1;
 251              		.loc 1 248 0
 252 002e 2662     		str	r6, [r4, #32]
 249:Src/main.c    ****   hadc1.Init.DiscontinuousConvMode = DISABLE;
 253              		.loc 1 249 0
 254 0030 6562     		str	r5, [r4, #36]
 250:Src/main.c    ****   hadc1.Init.NbrOfDiscConversion = 1;
 255              		.loc 1 250 0
 256 0032 A662     		str	r6, [r4, #40]
 251:Src/main.c    ****   hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
 257              		.loc 1 251 0
 258 0034 E662     		str	r6, [r4, #44]
 252:Src/main.c    ****   hadc1.Init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_NONE;
 259              		.loc 1 252 0
 260 0036 2563     		str	r5, [r4, #48]
 253:Src/main.c    ****   hadc1.Init.DMAContinuousRequests = DISABLE;
 261              		.loc 1 253 0
 262 0038 6563     		str	r5, [r4, #52]
 254:Src/main.c    ****   hadc1.Init.Overrun = ADC_OVR_DATA_OVERWRITTEN;
 263              		.loc 1 254 0
 264 003a A563     		str	r5, [r4, #56]
 255:Src/main.c    ****   HAL_ADC_Init(&hadc1);
 265              		.loc 1 255 0
 266 003c 2046     		mov	r0, r4
 267 003e FFF7FEFF 		bl	HAL_ADC_Init
 268              	.LVL12:
 258:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_11;
 269              		.loc 1 258 0
 270 0042 0B23     		movs	r3, #11
 271 0044 0193     		str	r3, [sp, #4]
 259:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_1;
 272              		.loc 1 259 0
 273 0046 0296     		str	r6, [sp, #8]
 260:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 274              		.loc 1 260 0
 275 0048 0397     		str	r7, [sp, #12]
 261:Src/main.c    ****   InjectionConfig.InjectedSingleDiff = ADC_SINGLE_ENDED;
 276              		.loc 1 261 0
 277 004a 0495     		str	r5, [sp, #16]
 262:Src/main.c    ****   InjectionConfig.InjectedOffsetNumber = ADC_OFFSET_NONE;
 278              		.loc 1 262 0
 279 004c 0595     		str	r5, [sp, #20]
 263:Src/main.c    ****   InjectionConfig.InjectedOffset = 0;
 280              		.loc 1 263 0
 281 004e 0695     		str	r5, [sp, #24]
 264:Src/main.c    ****   InjectionConfig.InjectedNbrOfConversion = 3;
 282              		.loc 1 264 0
 283 0050 0326     		movs	r6, #3
ARM GAS  /tmp/cc2KHXoi.s 			page 21


 284 0052 0796     		str	r6, [sp, #28]
 265:Src/main.c    ****   InjectionConfig.InjectedDiscontinuousConvMode = DISABLE;
 285              		.loc 1 265 0
 286 0054 0895     		str	r5, [sp, #32]
 266:Src/main.c    ****   InjectionConfig.AutoInjectedConv = DISABLE;
 287              		.loc 1 266 0
 288 0056 0995     		str	r5, [sp, #36]
 267:Src/main.c    ****   InjectionConfig.QueueInjectedContext = DISABLE;
 289              		.loc 1 267 0
 290 0058 0A95     		str	r5, [sp, #40]
 268:Src/main.c    ****   InjectionConfig.ExternalTrigInjecConv = ADC_EXTERNALTRIGINJECCONV_HRTIM_TRG2;
 291              		.loc 1 268 0
 292 005a 2423     		movs	r3, #36
 293 005c 0B93     		str	r3, [sp, #44]
 269:Src/main.c    ****   InjectionConfig.ExternalTrigInjecConvEdge = ADC_EXTERNALTRIGINJECCONV_EDGE_RISING;
 294              		.loc 1 269 0
 295 005e 4023     		movs	r3, #64
 296 0060 0C93     		str	r3, [sp, #48]
 270:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc1, &InjectionConfig);
 297              		.loc 1 270 0
 298 0062 2046     		mov	r0, r4
 299 0064 0DEB0701 		add	r1, sp, r7
 300 0068 FFF7FEFF 		bl	HAL_ADCEx_InjectedConfigChannel
 301              	.LVL13:
 273:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_12;
 302              		.loc 1 273 0
 303 006c 0C23     		movs	r3, #12
 304 006e 0193     		str	r3, [sp, #4]
 274:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_2;
 305              		.loc 1 274 0
 306 0070 0223     		movs	r3, #2
 307 0072 0293     		str	r3, [sp, #8]
 275:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 308              		.loc 1 275 0
 309 0074 0397     		str	r7, [sp, #12]
 276:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc1, &InjectionConfig);
 310              		.loc 1 276 0
 311 0076 2046     		mov	r0, r4
 312 0078 0DEB0701 		add	r1, sp, r7
 313 007c FFF7FEFF 		bl	HAL_ADCEx_InjectedConfigChannel
 314              	.LVL14:
 278:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_13;
 315              		.loc 1 278 0
 316 0080 0D23     		movs	r3, #13
 317 0082 0193     		str	r3, [sp, #4]
 279:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_3;
 318              		.loc 1 279 0
 319 0084 0296     		str	r6, [sp, #8]
 280:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 320              		.loc 1 280 0
 321 0086 0397     		str	r7, [sp, #12]
 281:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc1, &InjectionConfig);
 322              		.loc 1 281 0
 323 0088 2046     		mov	r0, r4
 324 008a 0DEB0701 		add	r1, sp, r7
 325 008e FFF7FEFF 		bl	HAL_ADCEx_InjectedConfigChannel
 326              	.LVL15:
ARM GAS  /tmp/cc2KHXoi.s 			page 22


 284:Src/main.c    ****   HAL_ADCEx_Calibration_Start(&hadc1, ADC_SINGLE_ENDED);
 327              		.loc 1 284 0
 328 0092 2046     		mov	r0, r4
 329 0094 2946     		mov	r1, r5
 330 0096 FFF7FEFF 		bl	HAL_ADCEx_Calibration_Start
 331              	.LVL16:
 287:Src/main.c    ****   HAL_ADCEx_InjectedStart(&hadc1);
 332              		.loc 1 287 0
 333 009a 2046     		mov	r0, r4
 334 009c FFF7FEFF 		bl	HAL_ADCEx_InjectedStart
 335              	.LVL17:
 289:Src/main.c    **** }
 336              		.loc 1 289 0
 337 00a0 11B0     		add	sp, sp, #68
 338              		@ sp needed
 339 00a2 F0BD     		pop	{r4, r5, r6, r7, pc}
 340              	.L9:
 341              		.align	2
 342              	.L8:
 343 00a4 00000000 		.word	hadc1
 344              		.cfi_endproc
 345              	.LFE126:
 347              		.section	.text.ADC2_Config,"ax",%progbits
 348              		.align	2
 349              		.thumb
 350              		.thumb_func
 352              	ADC2_Config:
 353              	.LFB127:
 292:Src/main.c    **** {
 354              		.loc 1 292 0
 355              		.cfi_startproc
 356              		@ args = 0, pretend = 0, frame = 64
 357              		@ frame_needed = 0, uses_anonymous_args = 0
 358 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 359              	.LCFI6:
 360              		.cfi_def_cfa_offset 20
 361              		.cfi_offset 4, -20
 362              		.cfi_offset 5, -16
 363              		.cfi_offset 6, -12
 364              		.cfi_offset 7, -8
 365              		.cfi_offset 14, -4
 366 0002 91B0     		sub	sp, sp, #68
 367              	.LCFI7:
 368              		.cfi_def_cfa_offset 88
 296:Src/main.c    ****   hadc2.Instance = ADC2;
 369              		.loc 1 296 0
 370 0004 274C     		ldr	r4, .L11
 371 0006 284B     		ldr	r3, .L11+4
 372 0008 2360     		str	r3, [r4]
 299:Src/main.c    ****   MultiModeConfig.DMAAccessMode = ADC_DMAACCESSMODE_DISABLED;
 373              		.loc 1 299 0
 374 000a 0025     		movs	r5, #0
 375 000c 0E95     		str	r5, [sp, #56]
 300:Src/main.c    ****   MultiModeConfig.Mode = ADC_MODE_INDEPENDENT;
 376              		.loc 1 300 0
 377 000e 0D95     		str	r5, [sp, #52]
 301:Src/main.c    ****   MultiModeConfig.TwoSamplingDelay = ADC_TWOSAMPLINGDELAY_1CYCLE;
ARM GAS  /tmp/cc2KHXoi.s 			page 23


 378              		.loc 1 301 0
 379 0010 0F95     		str	r5, [sp, #60]
 302:Src/main.c    ****   HAL_ADCEx_MultiModeConfigChannel(&hadc2, &MultiModeConfig);
 380              		.loc 1 302 0
 381 0012 2046     		mov	r0, r4
 382 0014 0DA9     		add	r1, sp, #52
 383 0016 FFF7FEFF 		bl	HAL_ADCEx_MultiModeConfigChannel
 384              	.LVL18:
 306:Src/main.c    ****   hadc2.Init.ClockPrescaler = ADC_CLOCK_ASYNC_DIV1;
 385              		.loc 1 306 0
 386 001a 6560     		str	r5, [r4, #4]
 307:Src/main.c    ****   hadc2.Init.Resolution = ADC_RESOLUTION_12B;
 387              		.loc 1 307 0
 388 001c A560     		str	r5, [r4, #8]
 308:Src/main.c    ****   hadc2.Init.DataAlign = ADC_DATAALIGN_RIGHT;
 389              		.loc 1 308 0
 390 001e E560     		str	r5, [r4, #12]
 309:Src/main.c    ****   hadc2.Init.ScanConvMode = ENABLE;
 391              		.loc 1 309 0
 392 0020 0126     		movs	r6, #1
 393 0022 2661     		str	r6, [r4, #16]
 310:Src/main.c    ****   hadc2.Init.EOCSelection = ADC_EOC_SINGLE_CONV;
 394              		.loc 1 310 0
 395 0024 0427     		movs	r7, #4
 396 0026 6761     		str	r7, [r4, #20]
 311:Src/main.c    ****   hadc2.Init.LowPowerAutoWait = DISABLE;
 397              		.loc 1 311 0
 398 0028 A561     		str	r5, [r4, #24]
 312:Src/main.c    ****   hadc2.Init.ContinuousConvMode = DISABLE;
 399              		.loc 1 312 0
 400 002a E561     		str	r5, [r4, #28]
 313:Src/main.c    ****   hadc2.Init.NbrOfConversion = 1;
 401              		.loc 1 313 0
 402 002c 2662     		str	r6, [r4, #32]
 314:Src/main.c    ****   hadc2.Init.DiscontinuousConvMode = DISABLE;
 403              		.loc 1 314 0
 404 002e 6562     		str	r5, [r4, #36]
 315:Src/main.c    ****   hadc2.Init.NbrOfDiscConversion = 1;
 405              		.loc 1 315 0
 406 0030 A662     		str	r6, [r4, #40]
 316:Src/main.c    ****   hadc2.Init.ExternalTrigConv = ADC_SOFTWARE_START;
 407              		.loc 1 316 0
 408 0032 E662     		str	r6, [r4, #44]
 317:Src/main.c    ****   hadc2.Init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_NONE;
 409              		.loc 1 317 0
 410 0034 2563     		str	r5, [r4, #48]
 318:Src/main.c    ****   hadc2.Init.DMAContinuousRequests = DISABLE;
 411              		.loc 1 318 0
 412 0036 6563     		str	r5, [r4, #52]
 319:Src/main.c    ****   hadc2.Init.Overrun = ADC_OVR_DATA_OVERWRITTEN;
 413              		.loc 1 319 0
 414 0038 A563     		str	r5, [r4, #56]
 320:Src/main.c    ****   HAL_ADC_Init(&hadc2);
 415              		.loc 1 320 0
 416 003a 2046     		mov	r0, r4
 417 003c FFF7FEFF 		bl	HAL_ADC_Init
 418              	.LVL19:
ARM GAS  /tmp/cc2KHXoi.s 			page 24


 323:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_13;
 419              		.loc 1 323 0
 420 0040 0D23     		movs	r3, #13
 421 0042 0193     		str	r3, [sp, #4]
 324:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_1;
 422              		.loc 1 324 0
 423 0044 0296     		str	r6, [sp, #8]
 325:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 424              		.loc 1 325 0
 425 0046 0397     		str	r7, [sp, #12]
 326:Src/main.c    ****   InjectionConfig.InjectedSingleDiff = ADC_SINGLE_ENDED;
 426              		.loc 1 326 0
 427 0048 0495     		str	r5, [sp, #16]
 327:Src/main.c    ****   InjectionConfig.InjectedOffsetNumber = ADC_OFFSET_NONE;
 428              		.loc 1 327 0
 429 004a 0595     		str	r5, [sp, #20]
 328:Src/main.c    ****   InjectionConfig.InjectedOffset = 0;
 430              		.loc 1 328 0
 431 004c 0695     		str	r5, [sp, #24]
 329:Src/main.c    ****   InjectionConfig.InjectedNbrOfConversion = 3;
 432              		.loc 1 329 0
 433 004e 0326     		movs	r6, #3
 434 0050 0796     		str	r6, [sp, #28]
 330:Src/main.c    ****   InjectionConfig.InjectedDiscontinuousConvMode = DISABLE;
 435              		.loc 1 330 0
 436 0052 0895     		str	r5, [sp, #32]
 331:Src/main.c    ****   InjectionConfig.AutoInjectedConv = DISABLE;
 437              		.loc 1 331 0
 438 0054 0995     		str	r5, [sp, #36]
 332:Src/main.c    ****   InjectionConfig.QueueInjectedContext = DISABLE;
 439              		.loc 1 332 0
 440 0056 0A95     		str	r5, [sp, #40]
 333:Src/main.c    ****   InjectionConfig.ExternalTrigInjecConv = ADC_EXTERNALTRIGINJECCONV_HRTIM_TRG2;
 441              		.loc 1 333 0
 442 0058 2423     		movs	r3, #36
 443 005a 0B93     		str	r3, [sp, #44]
 334:Src/main.c    ****   InjectionConfig.ExternalTrigInjecConvEdge = ADC_EXTERNALTRIGINJECCONV_EDGE_RISING;
 444              		.loc 1 334 0
 445 005c 4023     		movs	r3, #64
 446 005e 0C93     		str	r3, [sp, #48]
 335:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc2, &InjectionConfig);
 447              		.loc 1 335 0
 448 0060 2046     		mov	r0, r4
 449 0062 0DEB0701 		add	r1, sp, r7
 450 0066 FFF7FEFF 		bl	HAL_ADCEx_InjectedConfigChannel
 451              	.LVL20:
 338:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_14;
 452              		.loc 1 338 0
 453 006a 0E23     		movs	r3, #14
 454 006c 0193     		str	r3, [sp, #4]
 339:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_2;
 455              		.loc 1 339 0
 456 006e 0223     		movs	r3, #2
 457 0070 0293     		str	r3, [sp, #8]
 340:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 458              		.loc 1 340 0
 459 0072 0397     		str	r7, [sp, #12]
ARM GAS  /tmp/cc2KHXoi.s 			page 25


 341:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc2, &InjectionConfig);
 460              		.loc 1 341 0
 461 0074 2046     		mov	r0, r4
 462 0076 0DEB0701 		add	r1, sp, r7
 463 007a FFF7FEFF 		bl	HAL_ADCEx_InjectedConfigChannel
 464              	.LVL21:
 343:Src/main.c    ****   InjectionConfig.InjectedChannel = ADC_CHANNEL_15;
 465              		.loc 1 343 0
 466 007e 0F23     		movs	r3, #15
 467 0080 0193     		str	r3, [sp, #4]
 344:Src/main.c    ****   InjectionConfig.InjectedRank = ADC_INJECTED_RANK_3;
 468              		.loc 1 344 0
 469 0082 0296     		str	r6, [sp, #8]
 345:Src/main.c    ****   InjectionConfig.InjectedSamplingTime = ADC_SAMPLETIME_19CYCLES_5;
 470              		.loc 1 345 0
 471 0084 0397     		str	r7, [sp, #12]
 346:Src/main.c    ****   HAL_ADCEx_InjectedConfigChannel(&hadc2, &InjectionConfig);
 472              		.loc 1 346 0
 473 0086 2046     		mov	r0, r4
 474 0088 0DEB0701 		add	r1, sp, r7
 475 008c FFF7FEFF 		bl	HAL_ADCEx_InjectedConfigChannel
 476              	.LVL22:
 349:Src/main.c    ****   HAL_ADCEx_Calibration_Start(&hadc2, ADC_SINGLE_ENDED);
 477              		.loc 1 349 0
 478 0090 2046     		mov	r0, r4
 479 0092 2946     		mov	r1, r5
 480 0094 FFF7FEFF 		bl	HAL_ADCEx_Calibration_Start
 481              	.LVL23:
 352:Src/main.c    ****   HAL_ADCEx_InjectedStart(&hadc2);
 482              		.loc 1 352 0
 483 0098 2046     		mov	r0, r4
 484 009a FFF7FEFF 		bl	HAL_ADCEx_InjectedStart
 485              	.LVL24:
 354:Src/main.c    **** }
 486              		.loc 1 354 0
 487 009e 11B0     		add	sp, sp, #68
 488              		@ sp needed
 489 00a0 F0BD     		pop	{r4, r5, r6, r7, pc}
 490              	.L12:
 491 00a2 00BF     		.align	2
 492              	.L11:
 493 00a4 00000000 		.word	hadc2
 494 00a8 00010050 		.word	1342177536
 495              		.cfi_endproc
 496              	.LFE127:
 498              		.section	.text.HRTIM_Config,"ax",%progbits
 499              		.align	2
 500              		.thumb
 501              		.thumb_func
 503              	HRTIM_Config:
 504              	.LFB133:
 474:Src/main.c    **** {
 505              		.loc 1 474 0
 506              		.cfi_startproc
 507              		@ args = 0, pretend = 0, frame = 192
 508              		@ frame_needed = 0, uses_anonymous_args = 0
 509 0000 F0B5     		push	{r4, r5, r6, r7, lr}
ARM GAS  /tmp/cc2KHXoi.s 			page 26


 510              	.LCFI8:
 511              		.cfi_def_cfa_offset 20
 512              		.cfi_offset 4, -20
 513              		.cfi_offset 5, -16
 514              		.cfi_offset 6, -12
 515              		.cfi_offset 7, -8
 516              		.cfi_offset 14, -4
 517 0002 B1B0     		sub	sp, sp, #196
 518              	.LCFI9:
 519              		.cfi_def_cfa_offset 216
 487:Src/main.c    ****   hhrtim1.Instance = HRTIM1;
 520              		.loc 1 487 0
 521 0004 484D     		ldr	r5, .L14
 522 0006 494B     		ldr	r3, .L14+4
 523 0008 2B60     		str	r3, [r5]
 488:Src/main.c    ****   hhrtim1.Init.HRTIMInterruptResquests = HRTIM_IT_NONE;
 524              		.loc 1 488 0
 525 000a 0024     		movs	r4, #0
 526 000c 6C60     		str	r4, [r5, #4]
 489:Src/main.c    ****   hhrtim1.Init.SyncOptions = HRTIM_SYNCOPTION_NONE;
 527              		.loc 1 489 0
 528 000e AC60     		str	r4, [r5, #8]
 492:Src/main.c    ****   HAL_HRTIM_Init(&hhrtim1);
 529              		.loc 1 492 0
 530 0010 2846     		mov	r0, r5
 531 0012 FFF7FEFF 		bl	HAL_HRTIM_Init
 532              	.LVL25:
 505:Src/main.c    ****   timebase_config.Period = BUCK_PWM_PERIOD; /* 280kHz switching frequency */
 533              		.loc 1 505 0
 534 0016 4FF48053 		mov	r3, #4096
 535 001a 2C93     		str	r3, [sp, #176]
 506:Src/main.c    ****   timebase_config.RepetitionCounter = 63; /* 1 ISR every 128 PWM periods */
 536              		.loc 1 506 0
 537 001c 3F23     		movs	r3, #63
 538 001e 2D93     		str	r3, [sp, #180]
 507:Src/main.c    ****   timebase_config.PrescalerRatio = HRTIM_PRESCALERRATIO_MUL32;
 539              		.loc 1 507 0
 540 0020 2E94     		str	r4, [sp, #184]
 508:Src/main.c    ****   timebase_config.Mode = HRTIM_MODE_CONTINUOUS;
 541              		.loc 1 508 0
 542 0022 0826     		movs	r6, #8
 543 0024 2F96     		str	r6, [sp, #188]
 509:Src/main.c    ****   HAL_HRTIM_TimeBaseConfig(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, &timebase_config);
 544              		.loc 1 509 0
 545 0026 2846     		mov	r0, r5
 546 0028 2146     		mov	r1, r4
 547 002a 2CAA     		add	r2, sp, #176
 548 002c FFF7FEFF 		bl	HAL_HRTIM_TimeBaseConfig
 549              	.LVL26:
 516:Src/main.c    ****   timer_config.DMARequests = HRTIM_TIM_DMA_NONE;
 550              		.loc 1 516 0
 551 0030 1894     		str	r4, [sp, #96]
 517:Src/main.c    ****   timer_config.DMASrcAddress = 0x0;
 552              		.loc 1 517 0
 553 0032 1994     		str	r4, [sp, #100]
 518:Src/main.c    ****   timer_config.DMADstAddress = 0x0;
 554              		.loc 1 518 0
ARM GAS  /tmp/cc2KHXoi.s 			page 27


 555 0034 1A94     		str	r4, [sp, #104]
 519:Src/main.c    ****   timer_config.DMASize = 0x0;
 556              		.loc 1 519 0
 557 0036 1B94     		str	r4, [sp, #108]
 520:Src/main.c    ****   timer_config.HalfModeEnable = HRTIM_HALFMODE_DISABLED;
 558              		.loc 1 520 0
 559 0038 1C94     		str	r4, [sp, #112]
 521:Src/main.c    ****   timer_config.StartOnSync = HRTIM_SYNCSTART_DISABLED;
 560              		.loc 1 521 0
 561 003a 1D94     		str	r4, [sp, #116]
 522:Src/main.c    ****   timer_config.ResetOnSync = HRTIM_SYNCRESET_DISABLED;
 562              		.loc 1 522 0
 563 003c 1E94     		str	r4, [sp, #120]
 523:Src/main.c    ****   timer_config.DACSynchro = HRTIM_DACSYNC_NONE;
 564              		.loc 1 523 0
 565 003e 1F94     		str	r4, [sp, #124]
 524:Src/main.c    ****   timer_config.PreloadEnable = HRTIM_PRELOAD_ENABLED;
 566              		.loc 1 524 0
 567 0040 4FF00063 		mov	r3, #134217728
 568 0044 2093     		str	r3, [sp, #128]
 525:Src/main.c    ****   timer_config.UpdateGating = HRTIM_UPDATEGATING_INDEPENDENT;
 569              		.loc 1 525 0
 570 0046 2194     		str	r4, [sp, #132]
 526:Src/main.c    ****   timer_config.BurstMode = HRTIM_TIMERBURSTMODE_MAINTAINCLOCK;
 571              		.loc 1 526 0
 572 0048 2294     		str	r4, [sp, #136]
 527:Src/main.c    ****   timer_config.RepetitionUpdate = HRTIM_UPDATEONREPETITION_ENABLED;
 573              		.loc 1 527 0
 574 004a 4FF00053 		mov	r3, #536870912
 575 004e 2393     		str	r3, [sp, #140]
 528:Src/main.c    ****   timer_config.ResetUpdate = HRTIM_TIMUPDATEONRESET_DISABLED;
 576              		.loc 1 528 0
 577 0050 2B94     		str	r4, [sp, #172]
 529:Src/main.c    ****   timer_config.InterruptRequests = HRTIM_TIM_IT_REP;
 578              		.loc 1 529 0
 579 0052 1023     		movs	r3, #16
 580 0054 1793     		str	r3, [sp, #92]
 530:Src/main.c    ****   timer_config.PushPull = HRTIM_TIMPUSHPULLMODE_DISABLED;
 581              		.loc 1 530 0
 582 0056 2494     		str	r4, [sp, #144]
 531:Src/main.c    ****   timer_config.FaultEnable = HRTIM_TIMFAULTENABLE_FAULT1;
 583              		.loc 1 531 0
 584 0058 0127     		movs	r7, #1
 585 005a 2597     		str	r7, [sp, #148]
 532:Src/main.c    ****   timer_config.FaultLock = HRTIM_TIMFAULTLOCK_READWRITE;
 586              		.loc 1 532 0
 587 005c 2694     		str	r4, [sp, #152]
 533:Src/main.c    ****   timer_config.DeadTimeInsertion = HRTIM_TIMDEADTIMEINSERTION_ENABLED;
 588              		.loc 1 533 0
 589 005e 4FF48073 		mov	r3, #256
 590 0062 2793     		str	r3, [sp, #156]
 534:Src/main.c    ****   timer_config.DelayedProtectionMode = HRTIM_TIMER_A_B_C_DELAYEDPROTECTION_DISABLED;
 591              		.loc 1 534 0
 592 0064 2894     		str	r4, [sp, #160]
 535:Src/main.c    ****   timer_config.UpdateTrigger= HRTIM_TIMUPDATETRIGGER_NONE;
 593              		.loc 1 535 0
 594 0066 2994     		str	r4, [sp, #164]
ARM GAS  /tmp/cc2KHXoi.s 			page 28


 536:Src/main.c    ****   timer_config.ResetTrigger = HRTIM_TIMRESETTRIGGER_NONE;
 595              		.loc 1 536 0
 596 0068 2A94     		str	r4, [sp, #168]
 537:Src/main.c    ****   HAL_HRTIM_WaveformTimerConfig(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, &timer_config);
 597              		.loc 1 537 0
 598 006a 2846     		mov	r0, r5
 599 006c 2146     		mov	r1, r4
 600 006e 17AA     		add	r2, sp, #92
 601 0070 FFF7FEFF 		bl	HAL_HRTIM_WaveformTimerConfig
 602              	.LVL27:
 542:Src/main.c    ****   output_config_TA1_TA2.Polarity = HRTIM_OUTPUTPOLARITY_HIGH;
 603              		.loc 1 542 0
 604 0074 0F94     		str	r4, [sp, #60]
 543:Src/main.c    ****   output_config_TA1_TA2.SetSource = HRTIM_OUTPUTSET_TIMPER;
 605              		.loc 1 543 0
 606 0076 0423     		movs	r3, #4
 607 0078 1093     		str	r3, [sp, #64]
 544:Src/main.c    ****   output_config_TA1_TA2.ResetSource  = HRTIM_OUTPUTRESET_TIMCMP1;
 608              		.loc 1 544 0
 609 007a 1196     		str	r6, [sp, #68]
 545:Src/main.c    ****   output_config_TA1_TA2.IdleMode = HRTIM_OUTPUTIDLEMODE_NONE;
 610              		.loc 1 545 0
 611 007c 1294     		str	r4, [sp, #72]
 546:Src/main.c    ****   output_config_TA1_TA2.IdleLevel = HRTIM_OUTPUTIDLELEVEL_INACTIVE;
 612              		.loc 1 546 0
 613 007e 1394     		str	r4, [sp, #76]
 547:Src/main.c    ****   output_config_TA1_TA2.FaultLevel = HRTIM_OUTPUTFAULTLEVEL_INACTIVE;
 614              		.loc 1 547 0
 615 0080 2023     		movs	r3, #32
 616 0082 1493     		str	r3, [sp, #80]
 548:Src/main.c    ****   output_config_TA1_TA2.ChopperModeEnable = HRTIM_OUTPUTCHOPPERMODE_DISABLED;
 617              		.loc 1 548 0
 618 0084 1594     		str	r4, [sp, #84]
 549:Src/main.c    ****   output_config_TA1_TA2.BurstModeEntryDelayed = HRTIM_OUTPUTBURSTMODEENTRY_REGULAR;
 619              		.loc 1 549 0
 620 0086 1694     		str	r4, [sp, #88]
 550:Src/main.c    ****   HAL_HRTIM_WaveformOutputConfig(&hhrtim1,
 621              		.loc 1 550 0
 622 0088 2846     		mov	r0, r5
 623 008a 2146     		mov	r1, r4
 624 008c 3A46     		mov	r2, r7
 625 008e 0FAB     		add	r3, sp, #60
 626 0090 FFF7FEFF 		bl	HAL_HRTIM_WaveformOutputConfig
 627              	.LVL28:
 555:Src/main.c    ****   HAL_HRTIM_WaveformOutputConfig(&hhrtim1,
 628              		.loc 1 555 0
 629 0094 2846     		mov	r0, r5
 630 0096 2146     		mov	r1, r4
 631 0098 0222     		movs	r2, #2
 632 009a 0FAB     		add	r3, sp, #60
 633 009c FFF7FEFF 		bl	HAL_HRTIM_WaveformOutputConfig
 634              	.LVL29:
 561:Src/main.c    ****   compare_config.CompareValue = BUCK_PWM_PERIOD - 1;
 635              		.loc 1 561 0
 636 00a0 30AE     		add	r6, sp, #192
 637 00a2 40F6FF73 		movw	r3, #4095
 638 00a6 46F8903D 		str	r3, [r6, #-144]!
ARM GAS  /tmp/cc2KHXoi.s 			page 29


 562:Src/main.c    ****   HAL_HRTIM_WaveformCompareConfig(&hhrtim1,
 639              		.loc 1 562 0
 640 00aa 2846     		mov	r0, r5
 641 00ac 2146     		mov	r1, r4
 642 00ae 3A46     		mov	r2, r7
 643 00b0 3346     		mov	r3, r6
 644 00b2 FFF7FEFF 		bl	HAL_HRTIM_WaveformCompareConfig
 645              	.LVL30:
 567:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.FallingLock = HRTIM_TIMDEADTIME_FALLINGLOCK_WRITE;
 646              		.loc 1 567 0
 647 00b6 0A94     		str	r4, [sp, #40]
 568:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.FallingSign = HRTIM_TIMDEADTIME_FALLINGSIGN_POSITIVE;
 648              		.loc 1 568 0
 649 00b8 0994     		str	r4, [sp, #36]
 569:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.FallingSignLock = HRTIM_TIMDEADTIME_FALLINGSIGNLOCK_READONLY;
 650              		.loc 1 569 0
 651 00ba 4FF08043 		mov	r3, #1073741824
 652 00be 0B93     		str	r3, [sp, #44]
 570:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.FallingValue = DT_FALLING;
 653              		.loc 1 570 0
 654 00c0 2823     		movs	r3, #40
 655 00c2 0893     		str	r3, [sp, #32]
 571:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.Prescaler = HRTIM_TIMDEADTIME_PRESCALERRATIO_MUL8;
 656              		.loc 1 571 0
 657 00c4 0394     		str	r4, [sp, #12]
 572:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.RisingLock = HRTIM_TIMDEADTIME_RISINGLOCK_WRITE;
 658              		.loc 1 572 0
 659 00c6 0694     		str	r4, [sp, #24]
 573:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.RisingSign = HRTIM_TIMDEADTIME_RISINGSIGN_POSITIVE;
 660              		.loc 1 573 0
 661 00c8 0594     		str	r4, [sp, #20]
 574:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.RisingSignLock = HRTIM_TIMDEADTIME_RISINGSIGNLOCK_READONLY;
 662              		.loc 1 574 0
 663 00ca 4FF48042 		mov	r2, #16384
 664 00ce 0792     		str	r2, [sp, #28]
 575:Src/main.c    ****   HRTIM_TIM_DeadTimeConfig.RisingValue = DT_RISING;
 665              		.loc 1 575 0
 666 00d0 0493     		str	r3, [sp, #16]
 576:Src/main.c    ****   HAL_HRTIM_DeadTimeConfig(&hhrtim1, HRTIM_TIMERINDEX_TIMER_A, &HRTIM_TIM_DeadTimeConfig);
 667              		.loc 1 576 0
 668 00d2 2846     		mov	r0, r5
 669 00d4 2146     		mov	r1, r4
 670 00d6 03AA     		add	r2, sp, #12
 671 00d8 FFF7FEFF 		bl	HAL_HRTIM_DeadTimeConfig
 672              	.LVL31:
 581:Src/main.c    ****   compare_config.AutoDelayedMode = HRTIM_AUTODELAYEDMODE_REGULAR;
 673              		.loc 1 581 0
 674 00dc 0D94     		str	r4, [sp, #52]
 582:Src/main.c    ****   compare_config.AutoDelayedTimeout = 0;
 675              		.loc 1 582 0
 676 00de 0E94     		str	r4, [sp, #56]
 583:Src/main.c    ****   compare_config.CompareValue = BUCK_PWM_PERIOD/10; /* Samples in middle of ON time */
 677              		.loc 1 583 0
 678 00e0 40F29913 		movw	r3, #409
 679 00e4 0C93     		str	r3, [sp, #48]
 584:Src/main.c    ****   HAL_HRTIM_WaveformCompareConfig(&hhrtim1,
 680              		.loc 1 584 0
ARM GAS  /tmp/cc2KHXoi.s 			page 30


 681 00e6 2846     		mov	r0, r5
 682 00e8 2146     		mov	r1, r4
 683 00ea 0222     		movs	r2, #2
 684 00ec 3346     		mov	r3, r6
 685 00ee FFF7FEFF 		bl	HAL_HRTIM_WaveformCompareConfig
 686              	.LVL32:
 589:Src/main.c    ****   adc_trigger_config.Trigger = HRTIM_ADCTRIGGEREVENT24_TIMERA_CMP2;
 687              		.loc 1 589 0
 688 00f2 4FF48063 		mov	r3, #1024
 689 00f6 0293     		str	r3, [sp, #8]
 590:Src/main.c    ****   adc_trigger_config.UpdateSource = HRTIM_ADCTRIGGERUPDATE_TIMER_A;
 690              		.loc 1 590 0
 691 00f8 30AA     		add	r2, sp, #192
 692 00fa 4FF48033 		mov	r3, #65536
 693 00fe 42F8BC3D 		str	r3, [r2, #-188]!
 591:Src/main.c    ****   HAL_HRTIM_ADCTriggerConfig(&hhrtim1,
 694              		.loc 1 591 0
 695 0102 2846     		mov	r0, r5
 696 0104 0221     		movs	r1, #2
 697 0106 FFF7FEFF 		bl	HAL_HRTIM_ADCTriggerConfig
 698              	.LVL33:
 617:Src/main.c    ****   HAL_HRTIM_WaveformOutputStart(&hhrtim1, HRTIM_OUTPUT_TA1 | HRTIM_OUTPUT_TA2);
 699              		.loc 1 617 0
 700 010a 2846     		mov	r0, r5
 701 010c 0321     		movs	r1, #3
 702 010e FFF7FEFF 		bl	HAL_HRTIM_WaveformOutputStart
 703              	.LVL34:
 620:Src/main.c    ****   HAL_HRTIM_WaveformCounterStart_IT(&hhrtim1, HRTIM_TIMERID_TIMER_A);
 704              		.loc 1 620 0
 705 0112 2846     		mov	r0, r5
 706 0114 4FF40031 		mov	r1, #131072
 707 0118 FFF7FEFF 		bl	HAL_HRTIM_WaveformCounterStart_IT
 708              	.LVL35:
 621:Src/main.c    ****   HAL_HRTIM_MspPostInit(&hhrtim1);
 709              		.loc 1 621 0
 710 011c 2846     		mov	r0, r5
 711 011e FFF7FEFF 		bl	HAL_HRTIM_MspPostInit
 712              	.LVL36:
 622:Src/main.c    **** }
 713              		.loc 1 622 0
 714 0122 31B0     		add	sp, sp, #196
 715              		@ sp needed
 716 0124 F0BD     		pop	{r4, r5, r6, r7, pc}
 717              	.L15:
 718 0126 00BF     		.align	2
 719              	.L14:
 720 0128 00000000 		.word	hhrtim1
 721 012c 00740140 		.word	1073837056
 722              		.cfi_endproc
 723              	.LFE133:
 725              		.section	.text.DCDC_Reg,"ax",%progbits
 726              		.align	2
 727              		.global	DCDC_Reg
 728              		.thumb
 729              		.thumb_func
 731              	DCDC_Reg:
 732              	.LFB123:
ARM GAS  /tmp/cc2KHXoi.s 			page 31


  86:Src/main.c    **** void DCDC_Reg() {
 733              		.loc 1 86 0
 734              		.cfi_startproc
 735              		@ args = 0, pretend = 0, frame = 0
 736              		@ frame_needed = 0, uses_anonymous_args = 0
 737 0000 08B5     		push	{r3, lr}
 738              	.LCFI10:
 739              		.cfi_def_cfa_offset 8
 740              		.cfi_offset 3, -8
 741              		.cfi_offset 14, -4
  87:Src/main.c    ****   HAL_GPIO_TogglePin(LED_ACT_GPIO_Port, LED_ACT_Pin);
 742              		.loc 1 87 0
 743 0002 4FF09040 		mov	r0, #1207959552
 744 0006 0221     		movs	r1, #2
 745 0008 FFF7FEFF 		bl	HAL_GPIO_TogglePin
 746              	.LVL37:
 747 000c 08BD     		pop	{r3, pc}
 748              		.cfi_endproc
 749              	.LFE123:
 751 000e 00BF     		.section	.text._Error_Handler,"ax",%progbits
 752              		.align	2
 753              		.global	_Error_Handler
 754              		.thumb
 755              		.thumb_func
 757              	_Error_Handler:
 758              	.LFB140:
 824:Src/main.c    **** 
 825:Src/main.c    **** /**
 826:Src/main.c    ****   * @brief  This function is executed in case of error occurrence.
 827:Src/main.c    ****   * @param  None
 828:Src/main.c    ****   * @retval None
 829:Src/main.c    ****   */
 830:Src/main.c    **** void _Error_Handler(char * file, int line)
 831:Src/main.c    **** {
 759              		.loc 1 831 0
 760              		.cfi_startproc
 761              		@ Volatile: function does not return.
 762              		@ args = 0, pretend = 0, frame = 0
 763              		@ frame_needed = 0, uses_anonymous_args = 0
 764              		@ link register save eliminated.
 765              	.LVL38:
 766              	.L18:
 767 0000 FEE7     		b	.L18
 768              		.cfi_endproc
 769              	.LFE140:
 771 0002 00BF     		.section	.text.MX_USART1_UART_Init,"ax",%progbits
 772              		.align	2
 773              		.thumb
 774              		.thumb_func
 776              	MX_USART1_UART_Init:
 777              	.LFB136:
 725:Src/main.c    **** {
 778              		.loc 1 725 0
 779              		.cfi_startproc
 780              		@ args = 0, pretend = 0, frame = 0
 781              		@ frame_needed = 0, uses_anonymous_args = 0
 725:Src/main.c    **** {
ARM GAS  /tmp/cc2KHXoi.s 			page 32


 782              		.loc 1 725 0
 783 0000 08B5     		push	{r3, lr}
 784              	.LCFI11:
 785              		.cfi_def_cfa_offset 8
 786              		.cfi_offset 3, -8
 787              		.cfi_offset 14, -4
 727:Src/main.c    ****   huart1.Instance = USART1;
 788              		.loc 1 727 0
 789 0002 0C48     		ldr	r0, .L21
 790 0004 0C4B     		ldr	r3, .L21+4
 791 0006 0360     		str	r3, [r0]
 728:Src/main.c    ****   huart1.Init.BaudRate = 115200;
 792              		.loc 1 728 0
 793 0008 4FF4E133 		mov	r3, #115200
 794 000c 4360     		str	r3, [r0, #4]
 729:Src/main.c    ****   huart1.Init.WordLength = UART_WORDLENGTH_8B;
 795              		.loc 1 729 0
 796 000e 0023     		movs	r3, #0
 797 0010 8360     		str	r3, [r0, #8]
 730:Src/main.c    ****   huart1.Init.StopBits = UART_STOPBITS_1;
 798              		.loc 1 730 0
 799 0012 C360     		str	r3, [r0, #12]
 731:Src/main.c    ****   huart1.Init.Parity = UART_PARITY_NONE;
 800              		.loc 1 731 0
 801 0014 0361     		str	r3, [r0, #16]
 732:Src/main.c    ****   huart1.Init.Mode = UART_MODE_TX_RX;
 802              		.loc 1 732 0
 803 0016 0C22     		movs	r2, #12
 804 0018 4261     		str	r2, [r0, #20]
 733:Src/main.c    ****   huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 805              		.loc 1 733 0
 806 001a 8361     		str	r3, [r0, #24]
 734:Src/main.c    ****   huart1.Init.OverSampling = UART_OVERSAMPLING_16;
 807              		.loc 1 734 0
 808 001c C361     		str	r3, [r0, #28]
 735:Src/main.c    ****   huart1.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
 809              		.loc 1 735 0
 810 001e 0362     		str	r3, [r0, #32]
 736:Src/main.c    ****   huart1.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
 811              		.loc 1 736 0
 812 0020 4362     		str	r3, [r0, #36]
 737:Src/main.c    ****   if (HAL_UART_Init(&huart1) != HAL_OK)
 813              		.loc 1 737 0
 814 0022 FFF7FEFF 		bl	HAL_UART_Init
 815              	.LVL39:
 816 0026 20B1     		cbz	r0, .L19
 739:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 817              		.loc 1 739 0
 818 0028 0448     		ldr	r0, .L21+8
 819 002a 40F2E321 		movw	r1, #739
 820 002e FFF7FEFF 		bl	_Error_Handler
 821              	.LVL40:
 822              	.L19:
 823 0032 08BD     		pop	{r3, pc}
 824              	.L22:
 825              		.align	2
 826              	.L21:
ARM GAS  /tmp/cc2KHXoi.s 			page 33


 827 0034 00000000 		.word	huart1
 828 0038 00380140 		.word	1073821696
 829 003c 00000000 		.word	.LC0
 830              		.cfi_endproc
 831              	.LFE136:
 833              		.section	.text.MX_USART3_UART_Init,"ax",%progbits
 834              		.align	2
 835              		.thumb
 836              		.thumb_func
 838              	MX_USART3_UART_Init:
 839              	.LFB137:
 746:Src/main.c    **** {
 840              		.loc 1 746 0
 841              		.cfi_startproc
 842              		@ args = 0, pretend = 0, frame = 0
 843              		@ frame_needed = 0, uses_anonymous_args = 0
 844 0000 08B5     		push	{r3, lr}
 845              	.LCFI12:
 846              		.cfi_def_cfa_offset 8
 847              		.cfi_offset 3, -8
 848              		.cfi_offset 14, -4
 748:Src/main.c    ****   huart3.Instance = USART3;
 849              		.loc 1 748 0
 850 0002 0C48     		ldr	r0, .L25
 851 0004 0C4B     		ldr	r3, .L25+4
 852 0006 0360     		str	r3, [r0]
 749:Src/main.c    ****   huart3.Init.BaudRate = 115200;
 853              		.loc 1 749 0
 854 0008 4FF4E133 		mov	r3, #115200
 855 000c 4360     		str	r3, [r0, #4]
 750:Src/main.c    ****   huart3.Init.WordLength = UART_WORDLENGTH_8B;
 856              		.loc 1 750 0
 857 000e 0023     		movs	r3, #0
 858 0010 8360     		str	r3, [r0, #8]
 751:Src/main.c    ****   huart3.Init.StopBits = UART_STOPBITS_1;
 859              		.loc 1 751 0
 860 0012 C360     		str	r3, [r0, #12]
 752:Src/main.c    ****   huart3.Init.Parity = UART_PARITY_NONE;
 861              		.loc 1 752 0
 862 0014 0361     		str	r3, [r0, #16]
 753:Src/main.c    ****   huart3.Init.Mode = UART_MODE_TX_RX;
 863              		.loc 1 753 0
 864 0016 0C22     		movs	r2, #12
 865 0018 4261     		str	r2, [r0, #20]
 754:Src/main.c    ****   huart3.Init.HwFlowCtl = UART_HWCONTROL_NONE;
 866              		.loc 1 754 0
 867 001a 8361     		str	r3, [r0, #24]
 755:Src/main.c    ****   huart3.Init.OverSampling = UART_OVERSAMPLING_16;
 868              		.loc 1 755 0
 869 001c C361     		str	r3, [r0, #28]
 756:Src/main.c    ****   huart3.Init.OneBitSampling = UART_ONE_BIT_SAMPLE_DISABLE;
 870              		.loc 1 756 0
 871 001e 0362     		str	r3, [r0, #32]
 757:Src/main.c    ****   huart3.AdvancedInit.AdvFeatureInit = UART_ADVFEATURE_NO_INIT;
 872              		.loc 1 757 0
 873 0020 4362     		str	r3, [r0, #36]
 758:Src/main.c    ****   if (HAL_UART_Init(&huart3) != HAL_OK)
ARM GAS  /tmp/cc2KHXoi.s 			page 34


 874              		.loc 1 758 0
 875 0022 FFF7FEFF 		bl	HAL_UART_Init
 876              	.LVL41:
 877 0026 20B1     		cbz	r0, .L23
 760:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 878              		.loc 1 760 0
 879 0028 0448     		ldr	r0, .L25+8
 880 002a 4FF43E71 		mov	r1, #760
 881 002e FFF7FEFF 		bl	_Error_Handler
 882              	.LVL42:
 883              	.L23:
 884 0032 08BD     		pop	{r3, pc}
 885              	.L26:
 886              		.align	2
 887              	.L25:
 888 0034 00000000 		.word	huart3
 889 0038 00480040 		.word	1073760256
 890 003c 00000000 		.word	.LC0
 891              		.cfi_endproc
 892              	.LFE137:
 894              		.section	.text.SystemClock_Config,"ax",%progbits
 895              		.align	2
 896              		.global	SystemClock_Config
 897              		.thumb
 898              		.thumb_func
 900              	SystemClock_Config:
 901              	.LFB125:
 165:Src/main.c    **** {
 902              		.loc 1 165 0
 903              		.cfi_startproc
 904              		@ args = 0, pretend = 0, frame = 88
 905              		@ frame_needed = 0, uses_anonymous_args = 0
 906 0000 00B5     		push	{lr}
 907              	.LCFI13:
 908              		.cfi_def_cfa_offset 4
 909              		.cfi_offset 14, -4
 910 0002 97B0     		sub	sp, sp, #92
 911              	.LCFI14:
 912              		.cfi_def_cfa_offset 96
 173:Src/main.c    ****   RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
 913              		.loc 1 173 0
 914 0004 0122     		movs	r2, #1
 915 0006 0C92     		str	r2, [sp, #48]
 174:Src/main.c    ****   RCC_OscInitStruct.HSEState = RCC_HSE_ON;
 916              		.loc 1 174 0
 917 0008 4FF48033 		mov	r3, #65536
 918 000c 0D93     		str	r3, [sp, #52]
 175:Src/main.c    ****   RCC_OscInitStruct.HSEPredivValue = RCC_HSE_PREDIV_DIV1;
 919              		.loc 1 175 0
 920 000e 0021     		movs	r1, #0
 921 0010 0E91     		str	r1, [sp, #56]
 176:Src/main.c    ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 922              		.loc 1 176 0
 923 0012 1092     		str	r2, [sp, #64]
 177:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 924              		.loc 1 177 0
 925 0014 0222     		movs	r2, #2
ARM GAS  /tmp/cc2KHXoi.s 			page 35


 926 0016 1392     		str	r2, [sp, #76]
 178:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
 927              		.loc 1 178 0
 928 0018 1493     		str	r3, [sp, #80]
 179:Src/main.c    ****   RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL9;
 929              		.loc 1 179 0
 930 001a 4FF4E013 		mov	r3, #1835008
 931 001e 1593     		str	r3, [sp, #84]
 180:Src/main.c    ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 932              		.loc 1 180 0
 933 0020 0CA8     		add	r0, sp, #48
 934 0022 FFF7FEFF 		bl	HAL_RCC_OscConfig
 935              	.LVL43:
 936 0026 18B1     		cbz	r0, .L28
 182:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 937              		.loc 1 182 0
 938 0028 1D48     		ldr	r0, .L31
 939 002a B621     		movs	r1, #182
 940 002c FFF7FEFF 		bl	_Error_Handler
 941              	.LVL44:
 942              	.L28:
 187:Src/main.c    ****   RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
 943              		.loc 1 187 0
 944 0030 0F23     		movs	r3, #15
 945 0032 0793     		str	r3, [sp, #28]
 189:Src/main.c    ****   RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 946              		.loc 1 189 0
 947 0034 0221     		movs	r1, #2
 948 0036 0891     		str	r1, [sp, #32]
 190:Src/main.c    ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 949              		.loc 1 190 0
 950 0038 0023     		movs	r3, #0
 951 003a 0993     		str	r3, [sp, #36]
 191:Src/main.c    ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
 952              		.loc 1 191 0
 953 003c 4FF4A062 		mov	r2, #1280
 954 0040 0A92     		str	r2, [sp, #40]
 192:Src/main.c    ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 955              		.loc 1 192 0
 956 0042 0B93     		str	r3, [sp, #44]
 194:Src/main.c    ****   if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_2) != HAL_OK)
 957              		.loc 1 194 0
 958 0044 07A8     		add	r0, sp, #28
 959 0046 FFF7FEFF 		bl	HAL_RCC_ClockConfig
 960              	.LVL45:
 961 004a 18B1     		cbz	r0, .L29
 196:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 962              		.loc 1 196 0
 963 004c 1448     		ldr	r0, .L31
 964 004e C421     		movs	r1, #196
 965 0050 FFF7FEFF 		bl	_Error_Handler
 966              	.LVL46:
 967              	.L29:
 199:Src/main.c    ****   PeriphClkInit.PeriphClockSelection = RCC_PERIPHCLK_HRTIM1|RCC_PERIPHCLK_USART1
 968              		.loc 1 199 0
 969 0054 44F28103 		movw	r3, #16513
 970 0058 0093     		str	r3, [sp]
ARM GAS  /tmp/cc2KHXoi.s 			page 36


 201:Src/main.c    ****   PeriphClkInit.Usart1ClockSelection = RCC_USART1CLKSOURCE_PCLK1;
 971              		.loc 1 201 0
 972 005a 0023     		movs	r3, #0
 973 005c 0293     		str	r3, [sp, #8]
 202:Src/main.c    ****   PeriphClkInit.Adc12ClockSelection = RCC_ADC12PLLCLK_DIV1;
 974              		.loc 1 202 0
 975 005e 4FF48072 		mov	r2, #256
 976 0062 0492     		str	r2, [sp, #16]
 203:Src/main.c    ****   PeriphClkInit.Hrtim1ClockSelection = RCC_HRTIM1CLK_HCLK;
 977              		.loc 1 203 0
 978 0064 0693     		str	r3, [sp, #24]
 204:Src/main.c    ****   if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK)
 979              		.loc 1 204 0
 980 0066 6846     		mov	r0, sp
 981 0068 FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 982              	.LVL47:
 983 006c 18B1     		cbz	r0, .L30
 206:Src/main.c    ****     _Error_Handler(__FILE__, __LINE__);
 984              		.loc 1 206 0
 985 006e 0C48     		ldr	r0, .L31
 986 0070 CE21     		movs	r1, #206
 987 0072 FFF7FEFF 		bl	_Error_Handler
 988              	.LVL48:
 989              	.L30:
 211:Src/main.c    ****   HAL_SYSTICK_Config(HAL_RCC_GetHCLKFreq()/1000);
 990              		.loc 1 211 0
 991 0076 FFF7FEFF 		bl	HAL_RCC_GetHCLKFreq
 992              	.LVL49:
 993 007a 0A4B     		ldr	r3, .L31+4
 994 007c A3FB0020 		umull	r2, r0, r3, r0
 995 0080 8009     		lsrs	r0, r0, #6
 996 0082 FFF7FEFF 		bl	HAL_SYSTICK_Config
 997              	.LVL50:
 215:Src/main.c    ****   HAL_SYSTICK_CLKSourceConfig(SYSTICK_CLKSOURCE_HCLK);
 998              		.loc 1 215 0
 999 0086 0420     		movs	r0, #4
 1000 0088 FFF7FEFF 		bl	HAL_SYSTICK_CLKSourceConfig
 1001              	.LVL51:
 218:Src/main.c    ****   HAL_NVIC_SetPriority(SysTick_IRQn, 0, 0);
 1002              		.loc 1 218 0
 1003 008c 4FF0FF30 		mov	r0, #-1
 1004 0090 0021     		movs	r1, #0
 1005 0092 0A46     		mov	r2, r1
 1006 0094 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 1007              	.LVL52:
 219:Src/main.c    **** }
 1008              		.loc 1 219 0
 1009 0098 17B0     		add	sp, sp, #92
 1010              		@ sp needed
 1011 009a 5DF804FB 		ldr	pc, [sp], #4
 1012              	.L32:
 1013 009e 00BF     		.align	2
 1014              	.L31:
 1015 00a0 00000000 		.word	.LC0
 1016 00a4 D34D6210 		.word	274877907
 1017              		.cfi_endproc
 1018              	.LFE125:
ARM GAS  /tmp/cc2KHXoi.s 			page 37


 1020              		.global	__aeabi_f2d
 1021              		.section	.text.main,"ax",%progbits
 1022              		.align	2
 1023              		.global	main
 1024              		.thumb
 1025              		.thumb_func
 1027              	main:
 1028              	.LFB124:
  91:Src/main.c    **** {
 1029              		.loc 1 91 0
 1030              		.cfi_startproc
 1031              		@ args = 0, pretend = 0, frame = 0
 1032              		@ frame_needed = 0, uses_anonymous_args = 0
 1033 0000 70B5     		push	{r4, r5, r6, lr}
 1034              	.LCFI15:
 1035              		.cfi_def_cfa_offset 16
 1036              		.cfi_offset 4, -16
 1037              		.cfi_offset 5, -12
 1038              		.cfi_offset 6, -8
 1039              		.cfi_offset 14, -4
 1040 0002 2DED088B 		fstmfdd	sp!, {d8, d9, d10, d11}
 1041              	.LCFI16:
 1042              		.cfi_def_cfa_offset 48
 1043              		.cfi_offset 80, -48
 1044              		.cfi_offset 82, -40
 1045              		.cfi_offset 84, -32
 1046              		.cfi_offset 86, -24
 1047 0006 84B0     		sub	sp, sp, #16
 1048              	.LCFI17:
 1049              		.cfi_def_cfa_offset 64
  96:Src/main.c    ****   HAL_Init();
 1050              		.loc 1 96 0
 1051 0008 FFF7FEFF 		bl	HAL_Init
 1052              	.LVL53:
  99:Src/main.c    ****   SystemClock_Config();
 1053              		.loc 1 99 0
 1054 000c FFF7FEFF 		bl	SystemClock_Config
 1055              	.LVL54:
 102:Src/main.c    ****   MX_GPIO_Init();
 1056              		.loc 1 102 0
 1057 0010 FFF7FEFF 		bl	MX_GPIO_Init
 1058              	.LVL55:
 103:Src/main.c    ****   MX_DMA_Init();
 1059              		.loc 1 103 0
 1060 0014 FFF7FEFF 		bl	MX_DMA_Init
 1061              	.LVL56:
 113:Src/main.c    ****   MX_USART1_UART_Init();
 1062              		.loc 1 113 0
 1063 0018 FFF7FEFF 		bl	MX_USART1_UART_Init
 1064              	.LVL57:
 114:Src/main.c    ****   MX_USART3_UART_Init();
 1065              		.loc 1 114 0
 1066 001c FFF7FEFF 		bl	MX_USART3_UART_Init
 1067              	.LVL58:
 116:Src/main.c    ****   ADC1_Config();
 1068              		.loc 1 116 0
 1069 0020 FFF7FEFF 		bl	ADC1_Config
ARM GAS  /tmp/cc2KHXoi.s 			page 38


 1070              	.LVL59:
 117:Src/main.c    ****   ADC2_Config();
 1071              		.loc 1 117 0
 1072 0024 FFF7FEFF 		bl	ADC2_Config
 1073              	.LVL60:
 119:Src/main.c    ****   HRTIM_Config();
 1074              		.loc 1 119 0
 1075 0028 FFF7FEFF 		bl	HRTIM_Config
 1076              	.LVL61:
 1077              	.LBB6:
 126:Src/main.c    ****     for (int i = 0; i < 2000; i++) {
 1078              		.loc 1 126 0
 1079 002c 0025     		movs	r5, #0
 1080              	.LBB7:
 127:Src/main.c    ****       Vin = (HAL_ADCEx_InjectedGetValue(&hadc1, ADC_INJECTED_RANK_2) * ADC_VREF * VOUT_DIV)/ARES;
 1081              		.loc 1 127 0
 1082 002e 9FED998A 		flds	s16, .L43
 1083 0032 DFED999A 		flds	s19, .L43+4
 1084 0036 DFED998A 		flds	s17, .L43+8
 133:Src/main.c    ****       Temp1 = r2temp(NTC_R((HAL_ADCEx_InjectedGetValue(&hadc2, ADC_INJECTED_RANK_2) * ADC_VREF)/ARE
 1085              		.loc 1 133 0
 1086 003a 9FED999A 		flds	s18, .L43+12
 138:Src/main.c    ****       esum = CLAMP(esum, -2000, 2000);
 1087              		.loc 1 138 0
 1088 003e 9FED99AA 		flds	s20, .L43+16
 141:Src/main.c    ****       duty = 1.0f - (Vin / (VTARGET + DC_RES * Iout + (esum * 0.01f)));
 1089              		.loc 1 141 0
 1090 0042 DFED99AA 		flds	s21, .L43+20
 1091 0046 D2E0     		b	.L41
 1092              	.LVL62:
 1093              	.L37:
 127:Src/main.c    ****       Vin = (HAL_ADCEx_InjectedGetValue(&hadc1, ADC_INJECTED_RANK_2) * ADC_VREF * VOUT_DIV)/ARES;
 1094              		.loc 1 127 0
 1095 0048 984C     		ldr	r4, .L43+24
 1096 004a 2046     		mov	r0, r4
 1097 004c 0221     		movs	r1, #2
 1098 004e FFF7FEFF 		bl	HAL_ADCEx_InjectedGetValue
 1099              	.LVL63:
 1100 0052 07EE100A 		fmsr	s14, r0	@ int
 1101 0056 F8EE477A 		fuitos	s15, s14
 1102 005a 67EE887A 		fmuls	s15, s15, s16
 1103 005e 67EEA97A 		fmuls	s15, s15, s19
 1104 0062 67EEA87A 		fmuls	s15, s15, s17
 1105 0066 924B     		ldr	r3, .L43+28
 1106 0068 C3ED007A 		fsts	s15, [r3]
 128:Src/main.c    ****       Vout = (HAL_ADCEx_InjectedGetValue(&hadc1, ADC_INJECTED_RANK_1) * ADC_VREF * VOUT_DIV)/ARES;
 1107              		.loc 1 128 0
 1108 006c 2046     		mov	r0, r4
 1109 006e 0121     		movs	r1, #1
 1110 0070 FFF7FEFF 		bl	HAL_ADCEx_InjectedGetValue
 1111              	.LVL64:
 1112 0074 07EE100A 		fmsr	s14, r0	@ int
 1113 0078 F8EE477A 		fuitos	s15, s14
 1114 007c 67EE887A 		fmuls	s15, s15, s16
 1115 0080 67EEA97A 		fmuls	s15, s15, s19
 1116 0084 67EEA87A 		fmuls	s15, s15, s17
 1117 0088 8A4E     		ldr	r6, .L43+32
ARM GAS  /tmp/cc2KHXoi.s 			page 39


 1118 008a C6ED007A 		fsts	s15, [r6]
 129:Src/main.c    ****       int16_t USpp = (HAL_ADCEx_InjectedGetValue(&hadc1, ADC_INJECTED_RANK_3) * ADC_VREF)/ARES;
 1119              		.loc 1 129 0
 1120 008e 2046     		mov	r0, r4
 1121 0090 0321     		movs	r1, #3
 1122 0092 FFF7FEFF 		bl	HAL_ADCEx_InjectedGetValue
 1123              	.LVL65:
 131:Src/main.c    ****       Iout = (HAL_ADCEx_InjectedGetValue(&hadc2, ADC_INJECTED_RANK_1) * ADC_VREF * IOUT_DIV)/ARES;
 1124              		.loc 1 131 0
 1125 0096 884C     		ldr	r4, .L43+36
 1126 0098 2046     		mov	r0, r4
 1127 009a 0121     		movs	r1, #1
 1128 009c FFF7FEFF 		bl	HAL_ADCEx_InjectedGetValue
 1129              	.LVL66:
 1130 00a0 07EE100A 		fmsr	s14, r0	@ int
 1131 00a4 F8EE477A 		fuitos	s15, s14
 1132 00a8 67EE887A 		fmuls	s15, s15, s16
 1133 00ac B7EE087A 		fconsts	s14, #120
 1134 00b0 67EE877A 		fmuls	s15, s15, s14
 1135 00b4 67EEA87A 		fmuls	s15, s15, s17
 1136 00b8 804B     		ldr	r3, .L43+40
 1137 00ba C3ED007A 		fsts	s15, [r3]
 133:Src/main.c    ****       Temp1 = r2temp(NTC_R((HAL_ADCEx_InjectedGetValue(&hadc2, ADC_INJECTED_RANK_2) * ADC_VREF)/ARE
 1138              		.loc 1 133 0
 1139 00be 2046     		mov	r0, r4
 1140 00c0 0221     		movs	r1, #2
 1141 00c2 FFF7FEFF 		bl	HAL_ADCEx_InjectedGetValue
 1142              	.LVL67:
 1143 00c6 07EE900A 		fmsr	s15, r0	@ int
 1144 00ca B8EE67BA 		fuitos	s22, s15
 1145 00ce 2BEE08BA 		fmuls	s22, s22, s16
 1146 00d2 2BEE28BA 		fmuls	s22, s22, s17
 1147 00d6 2BEE09BA 		fmuls	s22, s22, s18
 1148 00da 2046     		mov	r0, r4
 1149 00dc 0221     		movs	r1, #2
 1150 00de FFF7FEFF 		bl	HAL_ADCEx_InjectedGetValue
 1151              	.LVL68:
 1152 00e2 07EE100A 		fmsr	s14, r0	@ int
 1153 00e6 B8EE470A 		fuitos	s0, s14
 1154 00ea 20EE080A 		fmuls	s0, s0, s16
 1155 00ee 20EE280A 		fmuls	s0, s0, s17
 1156 00f2 38EE400A 		fsubs	s0, s16, s0
 1157 00f6 8BEE000A 		fdivs	s0, s22, s0
 1158 00fa FFF7FEFF 		bl	r2temp
 1159              	.LVL69:
 1160 00fe 704B     		ldr	r3, .L43+44
 1161 0100 83ED000A 		fsts	s0, [r3]
 134:Src/main.c    ****       Temp2 = r2temp(NTC_R((HAL_ADCEx_InjectedGetValue(&hadc2, ADC_INJECTED_RANK_3) * ADC_VREF)/ARE
 1162              		.loc 1 134 0
 1163 0104 2046     		mov	r0, r4
 1164 0106 0321     		movs	r1, #3
 1165 0108 FFF7FEFF 		bl	HAL_ADCEx_InjectedGetValue
 1166              	.LVL70:
 1167 010c 07EE900A 		fmsr	s15, r0	@ int
 1168 0110 B8EE67BA 		fuitos	s22, s15
 1169 0114 2BEE08BA 		fmuls	s22, s22, s16
 1170 0118 2BEE28BA 		fmuls	s22, s22, s17
ARM GAS  /tmp/cc2KHXoi.s 			page 40


 1171 011c 2BEE09BA 		fmuls	s22, s22, s18
 1172 0120 2046     		mov	r0, r4
 1173 0122 0321     		movs	r1, #3
 1174 0124 FFF7FEFF 		bl	HAL_ADCEx_InjectedGetValue
 1175              	.LVL71:
 1176 0128 07EE100A 		fmsr	s14, r0	@ int
 1177 012c B8EE470A 		fuitos	s0, s14
 1178 0130 20EE080A 		fmuls	s0, s0, s16
 1179 0134 20EE280A 		fmuls	s0, s0, s17
 1180 0138 38EE400A 		fsubs	s0, s16, s0
 1181 013c 8BEE000A 		fdivs	s0, s22, s0
 1182 0140 FFF7FEFF 		bl	r2temp
 1183              	.LVL72:
 1184 0144 5F4B     		ldr	r3, .L43+48
 1185 0146 83ED000A 		fsts	s0, [r3]
 136:Src/main.c    ****       float error = VTARGET - Vout;
 1186              		.loc 1 136 0
 1187 014a D6ED007A 		flds	s15, [r6]
 1188 014e B3EE087A 		fconsts	s14, #56
 1189 0152 77EE677A 		fsubs	s15, s14, s15
 1190              	.LVL73:
 137:Src/main.c    ****       esum += error;
 1191              		.loc 1 137 0
 1192 0156 5C4B     		ldr	r3, .L43+52
 1193 0158 93ED007A 		flds	s14, [r3]
 1194 015c 77EE877A 		fadds	s15, s15, s14
 1195              	.LVL74:
 138:Src/main.c    ****       esum = CLAMP(esum, -2000, 2000);
 1196              		.loc 1 138 0
 1197 0160 F4EECA7A 		fcmpes	s15, s20
 1198 0164 F1EE10FA 		fmstat
 1199 0168 09D8     		bhi	.L42
 138:Src/main.c    ****       esum = CLAMP(esum, -2000, 2000);
 1200              		.loc 1 138 0 is_stmt 0 discriminator 1
 1201 016a 9FED587A 		flds	s14, .L43+56
 1202 016e F4EEC77A 		fcmpes	s15, s14
 1203 0172 F1EE10FA 		fmstat
 1204 0176 B8BF     		it	lt
 1205 0178 F0EE477A 		fcpyslt	s15, s14
 1206 017c 01E0     		b	.L35
 1207              	.L42:
 138:Src/main.c    ****       esum = CLAMP(esum, -2000, 2000);
 1208              		.loc 1 138 0
 1209 017e F0EE4A7A 		fcpys	s15, s20
 1210              	.L35:
 138:Src/main.c    ****       esum = CLAMP(esum, -2000, 2000);
 1211              		.loc 1 138 0 discriminator 3
 1212 0182 514B     		ldr	r3, .L43+52
 1213 0184 C3ED007A 		fsts	s15, [r3]
 141:Src/main.c    ****       duty = 1.0f - (Vin / (VTARGET + DC_RES * Iout + (esum * 0.01f)));
 1214              		.loc 1 141 0 is_stmt 1 discriminator 3
 1215 0188 4C4B     		ldr	r3, .L43+40
 1216 018a 93ED007A 		flds	s14, [r3]
 1217 018e 27EE2A7A 		fmuls	s14, s14, s21
 1218 0192 F3EE086A 		fconsts	s13, #56
 1219              	.LVL75:
 1220 0196 37EE267A 		fadds	s14, s14, s13
ARM GAS  /tmp/cc2KHXoi.s 			page 41


 1221 019a DFED4D6A 		flds	s13, .L43+60
 1222              	.LVL76:
 1223 019e 67EEA67A 		fmuls	s15, s15, s13
 1224 01a2 77EE277A 		fadds	s15, s14, s15
 1225 01a6 424B     		ldr	r3, .L43+28
 1226 01a8 93ED007A 		flds	s14, [r3]
 1227 01ac 87EE277A 		fdivs	s14, s14, s15
 1228 01b0 F7EE007A 		fconsts	s15, #112
 1229 01b4 37EEC77A 		fsubs	s14, s15, s14
 142:Src/main.c    ****       duty = MIN(duty, 0.76f); // limit dutycicle (max 50V at 12V in)
 1230              		.loc 1 142 0 discriminator 3
 1231 01b8 DFED467A 		flds	s15, .L43+64
 1232 01bc B4EEE77A 		fcmpes	s14, s15
 1233 01c0 F1EE10FA 		fmstat
 1234 01c4 88BF     		it	hi
 1235 01c6 B0EE677A 		fcpyshi	s14, s15
 1236 01ca 434B     		ldr	r3, .L43+68
 1237 01cc 83ED007A 		fsts	s14, [r3]
 144:Src/main.c    ****       uint16_t TIMERSET = BUCK_PWM_PERIOD - (BUCK_PWM_PERIOD * duty);
 1238              		.loc 1 144 0 discriminator 3
 1239 01d0 DFED427A 		flds	s15, .L43+72
 1240 01d4 27EE277A 		fmuls	s14, s14, s15
 1241 01d8 77EEC77A 		fsubs	s15, s15, s14
 1242 01dc FCEEE77A 		ftouizs	s15, s15
 1243 01e0 17EE902A 		fmrs	r2, s15	@ int
 1244 01e4 92B2     		uxth	r2, r2
 1245              	.LVL77:
 146:Src/main.c    ****       HRTIM1->sTimerxRegs[HRTIM_TIMERINDEX_TIMER_A].CMP1xR = TIMERSET; //set new compare value
 1246              		.loc 1 146 0 discriminator 3
 1247 01e6 3E4B     		ldr	r3, .L43+76
 1248 01e8 C3F89C20 		str	r2, [r3, #156]
 1249              	.LVL78:
 1250              	.LBE7:
 126:Src/main.c    ****     for (int i = 0; i < 2000; i++) {
 1251              		.loc 1 126 0 discriminator 3
 1252 01ec 0135     		adds	r5, r5, #1
 1253              	.LVL79:
 1254              	.L41:
 126:Src/main.c    ****     for (int i = 0; i < 2000; i++) {
 1255              		.loc 1 126 0 is_stmt 0 discriminator 1
 1256 01ee B5F5FA6F 		cmp	r5, #2000
 1257 01f2 FFF629AF 		blt	.L37
 1258              	.LBE6:
 150:Src/main.c    ****     HAL_GPIO_TogglePin(LED_READY_GPIO_Port, LED_READY_Pin);
 1259              		.loc 1 150 0 is_stmt 1
 1260 01f6 4FF09040 		mov	r0, #1207959552
 1261 01fa 0121     		movs	r1, #1
 1262 01fc FFF7FEFF 		bl	HAL_GPIO_TogglePin
 1263              	.LVL80:
 153:Src/main.c    ****     printf("%c[2J", 27); // clear terminal
 1264              		.loc 1 153 0
 1265 0200 3848     		ldr	r0, .L43+80
 1266 0202 1B21     		movs	r1, #27
 1267 0204 FFF7FEFF 		bl	printf
 1268              	.LVL81:
 154:Src/main.c    ****     printf("%c[H", 27);  // home cursor
 1269              		.loc 1 154 0
ARM GAS  /tmp/cc2KHXoi.s 			page 42


 1270 0208 3748     		ldr	r0, .L43+84
 1271 020a 1B21     		movs	r1, #27
 1272 020c FFF7FEFF 		bl	printf
 1273              	.LVL82:
 156:Src/main.c    ****     printf("NTC1: %.2f°C  NTC2: %.2f°C\n\r", Temp1, Temp2);
 1274              		.loc 1 156 0
 1275 0210 2B4B     		ldr	r3, .L43+44
 1276 0212 1868     		ldr	r0, [r3]	@ float
 1277 0214 FFF7FEFF 		bl	__aeabi_f2d
 1278              	.LVL83:
 1279 0218 0446     		mov	r4, r0
 1280 021a 0D46     		mov	r5, r1
 1281              	.LVL84:
 1282 021c 294B     		ldr	r3, .L43+48
 1283 021e 1868     		ldr	r0, [r3]	@ float
 1284 0220 FFF7FEFF 		bl	__aeabi_f2d
 1285              	.LVL85:
 1286 0224 CDE90001 		strd	r0, [sp]
 1287 0228 3048     		ldr	r0, .L43+88
 1288 022a 2246     		mov	r2, r4
 1289 022c 2B46     		mov	r3, r5
 1290 022e FFF7FEFF 		bl	printf
 1291              	.LVL86:
 157:Src/main.c    ****     printf("Vin:  %.3fV  Vout: %.3fV\n\r", Vin, Vout);
 1292              		.loc 1 157 0
 1293 0232 1F4B     		ldr	r3, .L43+28
 1294 0234 1868     		ldr	r0, [r3]	@ float
 1295 0236 FFF7FEFF 		bl	__aeabi_f2d
 1296              	.LVL87:
 1297 023a 0446     		mov	r4, r0
 1298 023c 0D46     		mov	r5, r1
 1299 023e 1D4E     		ldr	r6, .L43+32
 1300 0240 3068     		ldr	r0, [r6]	@ float
 1301 0242 FFF7FEFF 		bl	__aeabi_f2d
 1302              	.LVL88:
 1303 0246 CDE90001 		strd	r0, [sp]
 1304 024a 2948     		ldr	r0, .L43+92
 1305 024c 2246     		mov	r2, r4
 1306 024e 2B46     		mov	r3, r5
 1307 0250 FFF7FEFF 		bl	printf
 1308              	.LVL89:
 158:Src/main.c    ****     printf("Iout: %.2fA    Pout: %.2fW  e: %.2f\n\r", Iout, Iout*Vout, esum);
 1309              		.loc 1 158 0
 1310 0254 194B     		ldr	r3, .L43+40
 1311 0256 D3ED007A 		flds	s15, [r3]
 1312 025a 96ED00BA 		flds	s22, [r6]
 1313 025e 27EE8BBA 		fmuls	s22, s15, s22
 1314 0262 17EE900A 		fmrs	r0, s15
 1315 0266 FFF7FEFF 		bl	__aeabi_f2d
 1316              	.LVL90:
 1317 026a 0446     		mov	r4, r0
 1318 026c 0D46     		mov	r5, r1
 1319 026e 1BEE100A 		fmrs	r0, s22
 1320 0272 FFF7FEFF 		bl	__aeabi_f2d
 1321              	.LVL91:
 1322 0276 CDE90001 		strd	r0, [sp]
 1323 027a 134B     		ldr	r3, .L43+52
ARM GAS  /tmp/cc2KHXoi.s 			page 43


 1324 027c 1868     		ldr	r0, [r3]	@ float
 1325 027e FFF7FEFF 		bl	__aeabi_f2d
 1326              	.LVL92:
 1327 0282 CDE90201 		strd	r0, [sp, #8]
 1328 0286 1B48     		ldr	r0, .L43+96
 1329 0288 2246     		mov	r2, r4
 1330 028a 2B46     		mov	r3, r5
 1331 028c FFF7FEFF 		bl	printf
 1332              	.LVL93:
 1333              	.LBB8:
 126:Src/main.c    ****     for (int i = 0; i < 2000; i++) {
 1334              		.loc 1 126 0
 1335 0290 0025     		movs	r5, #0
 1336              	.LBE8:
 159:Src/main.c    ****   }
 1337              		.loc 1 159 0
 1338 0292 ACE7     		b	.L41
 1339              	.L44:
 1340              		.align	2
 1341              	.L43:
 1342 0294 33335340 		.word	1079194419
 1343 0298 0AD77341 		.word	1098110730
 1344 029c 00008039 		.word	964689920
 1345 02a0 00401C46 		.word	1176256512
 1346 02a4 0000FA44 		.word	1157234688
 1347 02a8 CDCC2C40 		.word	1076677837
 1348 02ac 00000000 		.word	hadc1
 1349 02b0 00000000 		.word	Vin
 1350 02b4 00000000 		.word	Vout
 1351 02b8 00000000 		.word	hadc2
 1352 02bc 00000000 		.word	Iout
 1353 02c0 00000000 		.word	Temp1
 1354 02c4 00000000 		.word	Temp2
 1355 02c8 00000000 		.word	esum
 1356 02cc 0000FAC4 		.word	-990248960
 1357 02d0 0AD7233C 		.word	1008981770
 1358 02d4 5C8F423F 		.word	1061326684
 1359 02d8 00000000 		.word	duty
 1360 02dc 00008045 		.word	1166016512
 1361 02e0 00740140 		.word	1073837056
 1362 02e4 0C000000 		.word	.LC1
 1363 02e8 14000000 		.word	.LC2
 1364 02ec 1C000000 		.word	.LC3
 1365 02f0 3C000000 		.word	.LC4
 1366 02f4 58000000 		.word	.LC5
 1367              		.cfi_endproc
 1368              	.LFE124:
 1370              		.comm	esum,4,4
 1371              		.comm	duty,4,4
 1372              		.comm	Iout,4,4
 1373              		.comm	Temp2,4,4
 1374              		.comm	Temp1,4,4
 1375              		.comm	Vout,4,4
 1376              		.comm	Vin,4,4
 1377              		.comm	hdma_usart1_tx,68,4
 1378              		.comm	hdma_usart1_rx,68,4
 1379              		.comm	huart3,112,4
ARM GAS  /tmp/cc2KHXoi.s 			page 44


 1380              		.comm	huart1,112,4
 1381              		.comm	htim3,64,4
 1382              		.comm	htim2,64,4
 1383              		.comm	hhrtim1,220,4
 1384              		.comm	hdac2,20,4
 1385              		.comm	hdac1,20,4
 1386              		.comm	hcomp6,44,4
 1387              		.comm	hcomp4,44,4
 1388              		.comm	hcomp2,44,4
 1389              		.comm	hdma_adc2,68,4
 1390              		.comm	hdma_adc1,68,4
 1391              		.comm	hadc2,84,4
 1392              		.comm	hadc1,84,4
 1393              		.section	.rodata.str1.4,"aMS",%progbits,1
 1394              		.align	2
 1395              	.LC0:
 1396 0000 5372632F 		.ascii	"Src/main.c\000"
 1396      6D61696E 
 1396      2E6300
 1397 000b 00       		.space	1
 1398              	.LC1:
 1399 000c 25635B32 		.ascii	"%c[2J\000"
 1399      4A00
 1400 0012 0000     		.space	2
 1401              	.LC2:
 1402 0014 25635B48 		.ascii	"%c[H\000"
 1402      00
 1403 0019 000000   		.space	3
 1404              	.LC3:
 1405 001c 4E544331 		.ascii	"NTC1: %.2f\302\260C  NTC2: %.2f\302\260C\012\015\000"
 1405      3A20252E 
 1405      3266C2B0 
 1405      4320204E 
 1405      5443323A 
 1406 003b 00       		.space	1
 1407              	.LC4:
 1408 003c 56696E3A 		.ascii	"Vin:  %.3fV  Vout: %.3fV\012\015\000"
 1408      2020252E 
 1408      33665620 
 1408      20566F75 
 1408      743A2025 
 1409 0057 00       		.space	1
 1410              	.LC5:
 1411 0058 496F7574 		.ascii	"Iout: %.2fA    Pout: %.2fW  e: %.2f\012\015\000"
 1411      3A20252E 
 1411      32664120 
 1411      20202050 
 1411      6F75743A 
 1412 007e 0000     		.text
 1413              	.Letext0:
 1414              		.file 2 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f334x8.h"
 1415              		.file 3 "/home/niklas/Downloads/gcc-arm-none-eabi-4_8-2014q3/arm-none-eabi/include/machine/_defaul
 1416              		.file 4 "/home/niklas/Downloads/gcc-arm-none-eabi-4_8-2014q3/arm-none-eabi/include/stdint.h"
 1417              		.file 5 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f3xx.h"
 1418              		.file 6 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_def.h"
 1419              		.file 7 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_rcc.h"
 1420              		.file 8 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_rcc_ex.h"
ARM GAS  /tmp/cc2KHXoi.s 			page 45


 1421              		.file 9 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_gpio.h"
 1422              		.file 10 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_dma.h"
 1423              		.file 11 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_adc_ex.h"
 1424              		.file 12 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_adc.h"
 1425              		.file 13 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_comp.h"
 1426              		.file 14 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_dac.h"
 1427              		.file 15 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_hrtim.h"
 1428              		.file 16 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_tim.h"
 1429              		.file 17 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_uart.h"
 1430              		.file 18 "Drivers/CMSIS/Include/core_cm4.h"
 1431              		.file 19 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_cortex.h"
 1432              		.file 20 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal.h"
 1433              		.file 21 "/home/niklas/Downloads/gcc-arm-none-eabi-4_8-2014q3/arm-none-eabi/include/stdio.h"
ARM GAS  /tmp/cc2KHXoi.s 			page 46


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
     /tmp/cc2KHXoi.s:21     .text.MX_GPIO_Init:00000000 $t
     /tmp/cc2KHXoi.s:25     .text.MX_GPIO_Init:00000000 MX_GPIO_Init
     /tmp/cc2KHXoi.s:113    .text.MX_GPIO_Init:00000078 $d
     /tmp/cc2KHXoi.s:118    .text.MX_DMA_Init:00000000 $t
     /tmp/cc2KHXoi.s:122    .text.MX_DMA_Init:00000000 MX_DMA_Init
     /tmp/cc2KHXoi.s:193    .text.MX_DMA_Init:00000060 $d
     /tmp/cc2KHXoi.s:198    .text.ADC1_Config:00000000 $t
     /tmp/cc2KHXoi.s:202    .text.ADC1_Config:00000000 ADC1_Config
     /tmp/cc2KHXoi.s:343    .text.ADC1_Config:000000a4 $d
                            *COM*:00000054 hadc1
     /tmp/cc2KHXoi.s:348    .text.ADC2_Config:00000000 $t
     /tmp/cc2KHXoi.s:352    .text.ADC2_Config:00000000 ADC2_Config
     /tmp/cc2KHXoi.s:493    .text.ADC2_Config:000000a4 $d
                            *COM*:00000054 hadc2
     /tmp/cc2KHXoi.s:499    .text.HRTIM_Config:00000000 $t
     /tmp/cc2KHXoi.s:503    .text.HRTIM_Config:00000000 HRTIM_Config
     /tmp/cc2KHXoi.s:720    .text.HRTIM_Config:00000128 $d
                            *COM*:000000dc hhrtim1
     /tmp/cc2KHXoi.s:726    .text.DCDC_Reg:00000000 $t
     /tmp/cc2KHXoi.s:731    .text.DCDC_Reg:00000000 DCDC_Reg
     /tmp/cc2KHXoi.s:752    .text._Error_Handler:00000000 $t
     /tmp/cc2KHXoi.s:757    .text._Error_Handler:00000000 _Error_Handler
     /tmp/cc2KHXoi.s:772    .text.MX_USART1_UART_Init:00000000 $t
     /tmp/cc2KHXoi.s:776    .text.MX_USART1_UART_Init:00000000 MX_USART1_UART_Init
     /tmp/cc2KHXoi.s:827    .text.MX_USART1_UART_Init:00000034 $d
                            *COM*:00000070 huart1
     /tmp/cc2KHXoi.s:834    .text.MX_USART3_UART_Init:00000000 $t
     /tmp/cc2KHXoi.s:838    .text.MX_USART3_UART_Init:00000000 MX_USART3_UART_Init
     /tmp/cc2KHXoi.s:888    .text.MX_USART3_UART_Init:00000034 $d
                            *COM*:00000070 huart3
     /tmp/cc2KHXoi.s:895    .text.SystemClock_Config:00000000 $t
     /tmp/cc2KHXoi.s:900    .text.SystemClock_Config:00000000 SystemClock_Config
     /tmp/cc2KHXoi.s:1015   .text.SystemClock_Config:000000a0 $d
     /tmp/cc2KHXoi.s:1022   .text.main:00000000 $t
     /tmp/cc2KHXoi.s:1027   .text.main:00000000 main
     /tmp/cc2KHXoi.s:1342   .text.main:00000294 $d
                            *COM*:00000004 Vin
                            *COM*:00000004 Vout
                            *COM*:00000004 Iout
                            *COM*:00000004 Temp1
                            *COM*:00000004 Temp2
                            *COM*:00000004 esum
                            *COM*:00000004 duty
                            *COM*:00000044 hdma_usart1_tx
                            *COM*:00000044 hdma_usart1_rx
                            *COM*:00000040 htim3
                            *COM*:00000040 htim2
                            *COM*:00000014 hdac2
                            *COM*:00000014 hdac1
                            *COM*:0000002c hcomp6
                            *COM*:0000002c hcomp4
                            *COM*:0000002c hcomp2
                            *COM*:00000044 hdma_adc2
                            *COM*:00000044 hdma_adc1
     /tmp/cc2KHXoi.s:1394   .rodata.str1.4:00000000 $d
ARM GAS  /tmp/cc2KHXoi.s 			page 47


                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_GPIO_Init
HAL_NVIC_SetPriority
HAL_NVIC_EnableIRQ
HAL_ADCEx_MultiModeConfigChannel
HAL_ADC_Init
HAL_ADCEx_InjectedConfigChannel
HAL_ADCEx_Calibration_Start
HAL_ADCEx_InjectedStart
HAL_HRTIM_Init
HAL_HRTIM_TimeBaseConfig
HAL_HRTIM_WaveformTimerConfig
HAL_HRTIM_WaveformOutputConfig
HAL_HRTIM_WaveformCompareConfig
HAL_HRTIM_DeadTimeConfig
HAL_HRTIM_ADCTriggerConfig
HAL_HRTIM_WaveformOutputStart
HAL_HRTIM_WaveformCounterStart_IT
HAL_HRTIM_MspPostInit
HAL_GPIO_TogglePin
HAL_UART_Init
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_RCCEx_PeriphCLKConfig
HAL_RCC_GetHCLKFreq
HAL_SYSTICK_Config
HAL_SYSTICK_CLKSourceConfig
__aeabi_f2d
HAL_Init
HAL_ADCEx_InjectedGetValue
r2temp
printf
